"use strict";var KTAppTodo=function(){var l,s,d,a;return{init:function(){l=KTUtil.getById("kt_todo_aside"),s=KTUtil.getById("kt_todo_list"),d=KTUtil.getById("kt_todo_view"),a=KTUtil.getById("kt_todo_reply"),KTAppTodo.initAside(),KTAppTodo.initList(),KTAppTodo.initView(),KTAppTodo.initReply()},initAside:function(){new KTOffcanvas(l,{overlay:!0,baseClass:"offcanvas-mobile",toggleBy:"kt_subheader_mobile_toggle"}),KTUtil.on(l,'.list-item[data-action="list"]',"click",function(t){var e=KTUtil.attr(this,"data-type"),i=KTUtil.find(s,".kt-inbox__items"),o=this.closest(".kt-nav__item"),a=KTUtil.find(l,".kt-nav__item.kt-nav__item--active"),n=new KTDialog({type:"loader",placement:"top center",message:"Loading ..."});n.show(),setTimeout(function(){n.hide(),KTUtil.css(s,"display","flex"),KTUtil.css(d,"display","none"),KTUtil.addClass(o,"kt-nav__item--active"),KTUtil.removeClass(a,"kt-nav__item--active"),KTUtil.attr(i,"data-type",e)},600)})},initList:function(){KTUtil.on(s,'[data-inbox="group-select"] input',"click",function(){for(var t=KTUtil.findAll(s,'[data-inbox="message"]'),e=0,i=t.length;e<i;e++){var o=t[e];KTUtil.find(o,".checkbox input").checked=this.checked,this.checked?KTUtil.addClass(o,"active"):KTUtil.removeClass(o,"active")}}),KTUtil.on(s,'[data-inbox="message"] [data-inbox="actions"] .checkbox input',"click",function(){var t=this.closest('[data-inbox="message"]');t&&this.checked?KTUtil.addClass(t,"active"):KTUtil.removeClass(t,"active")})},initView:function(){KTUtil.on(d,'[data-inbox="back"]',"click",function(){var t=new KTDialog({type:"loader",placement:"top center",message:"Loading ..."});t.show(),setTimeout(function(){t.hide(),KTUtil.addClass(s,"d-block"),KTUtil.removeClass(s,"d-none"),KTUtil.addClass(d,"d-none"),KTUtil.removeClass(d,"d-block")},700)}),KTUtil.on(d,'[data-inbox="message"]',"click",function(t){var e=this.closest('[data-inbox="message"]'),i=KTUtil.find(this,'[data-toggle="dropdown"]'),o=KTUtil.find(this,'[data-inbox="toolbar"]');return!(t.target===i||i&&!0===i.contains(t.target))&&(!(t.target===o||o&&!0===o.contains(t.target))&&void(KTUtil.hasClass(e,"toggle-on")?(KTUtil.addClass(e,"toggle-off"),KTUtil.removeClass(e,"toggle-on")):(KTUtil.removeClass(e,"toggle-off"),KTUtil.addClass(e,"toggle-on"))))})},initReply:function(){var t,e,i,o;t=a,o="kt_todo_reply_editor",KTUtil.getById(o)&&(o=new Quill("#"+o,{modules:{toolbar:{}},placeholder:"Type message...",theme:"snow"}),e=KTUtil.find(t,".ql-toolbar"),o=KTUtil.find(t,".ql-editor"),e&&KTUtil.addClass(e,"px-5 border-top-0 border-left-0 border-right-0"),o&&KTUtil.addClass(o,"px-8")),e="kt_todo_reply_attachments",KTUtil.getById(e)&&(i="#"+e,(o=$(i+" .dropzone-item")).id="",e=o.parent(".dropzone-items").html(),o.remove(),(e=new Dropzone(i,{url:"https://keenthemes.com/scripts/void.php",parallelUploads:20,maxFilesize:1,previewTemplate:e,previewsContainer:i+" .dropzone-items",clickable:i+"_select"})).on("addedfile",function(t){$(document).find(i+" .dropzone-item").css("display","")}),e.on("totaluploadprogress",function(t){document.querySelector(i+" .progress-bar").style.width=t+"%"}),e.on("sending",function(t){document.querySelector(i+" .progress-bar").style.opacity="1"}),e.on("complete",function(t){var e=i+" .dz-complete";setTimeout(function(){$(e+" .progress-bar, "+e+" .progress").css("opacity","0")},300)}))}}}();jQuery(document).ready(function(){KTAppTodo.init()});