!function(){"use strict";function s(){}function d(e){return function(){return e}}function a(t){return function(e){return!t(e)}}function c(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r}function f(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function l(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function r(e,t,n){return f(e,function(e){n=t(n,e)}),n}function m(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return Fe.some(i);if(n(i,r))break}return Fe.none()}function p(e,t){return m(e,t,Pe)}function g(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!He(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Xe.apply(t,e[n])}return t}(c(e,t))}function h(e){return(e=Qe.call(e,0)).reverse(),e}function t(e,t){return 0<=t&&t<e.length?Fe.some(e[t]):Fe.none()}function v(e){return t(e,0)}function u(e){return t(e,e.length-1)}function n(){return Ye(0,0)}function y(e,t){var n=String(t).toLowerCase();return p(e,function(e){return e.search(n)})}function o(e,t){return-1!==e.indexOf(t)}function e(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:(e=function(e){return function(){return t===e}})(et),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(tt),isSafari:e("Safari")}}function i(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:(e=function(e){return function(){return t===e}})(ot),isiOS:e("iOS"),isAndroid:e(it),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(ut),isFreeBSD:e(at),isChromeOS:e(st)}}function S(e,t){var n,r,o,i,u=Ze.browsers(),a=Ze.oses(),s=y(u,i=e).map(function(e){var t=Ge(e.versionRegexes,i);return{current:e.name,version:t}}).fold(nt,rt),c=y(a,o=e).map(function(e){var t=Ge(e.versionRegexes,o);return{current:e.name,version:t}}).fold(ct,dt);return{browser:s,os:c,deviceType:(n=s,r=e,u=t,s=(a=c).isiOS()&&!0===/ipad/i.test(r),e=a.isiOS()&&!s,c=(t=a.isiOS()||a.isAndroid())||u("(pointer:coarse)"),u=s||!e&&t&&u("(min-device-width:768px)"),t=e||t&&!u,r=n.isSafari()&&a.isiOS()&&!1===/safari/i.test(r),{isiPad:d(s),isiPhone:d(e),isTablet:d(u),isPhone:d(t),isTouch:d(c),isAndroid:a.isAndroid,isiOS:a.isiOS,isWebView:d(r),isDesktop:d(!t&&!u&&!r)})}}function b(e){return window.matchMedia(e).matches}function C(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function O(e,t){return e.dom===t.dom}function N(e,t){return ft().browser.isIE()?(r=t,o=(n=e).dom,n=t.dom,r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(o.compareDocumentPosition(n)&r)):(e=e.dom)!==(t=t.dom)&&e.contains(t);var n,r,o}function L(e,t){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function T(e,t){for(var n=vt(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function k(e){return 1===e.dom.nodeType}function x(e,t){var n=e.dom;T(t,function(e,t){!function(e,t,n){if(!(qe(n)||Ke(n)||We(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)})}function A(e){return r(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function D(e){return Fe.from(e.dom.parentNode).map(mt)}function w(e){return c(e.dom.childNodes,mt)}function E(e,t){return e=e.dom.childNodes,Fe.from(e[t]).map(mt)}function B(e){return E(e,0)}function I(e){return E(e,e.dom.childNodes.length-1)}function P(t,n){D(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function R(e,t){e.dom.appendChild(t.dom)}function M(t,e){f(e,function(e){R(t,e)})}function U(e){null!==(e=e.dom).parentNode&&e.parentNode.removeChild(e)}function _(e){return mt(e.dom.cloneNode(!0))}function F(e,t){var n=(n=e,t=lt(t),n=A(n),x(t,n),t);return P(e,n),t=w(e),M(n,t),U(e),n}function $(e){return e&&3===e.nodeType}function j(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function q(e,t){return e&&e.nodeName in t}function H(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function K(e,t){return e.isChildOf(t,e.getRoot())}function V(e,t){var n,r,o,i,u=e.dom,a=e.schema.getBlockElements(),s=u.createFragment(),c=!1===(n=e.getParam("forced_root_block","p"))?"":!0===n?"p":n;if(c&&((o=u.create(c)).tagName===c.toUpperCase()&&u.setAttribs(o,e.getParam("forced_root_block_attrs",{})),q(t.firstChild,a)||s.appendChild(o)),t)for(;r=t.firstChild;){var d=r.nodeName;i||"SPAN"===d&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),q(r,a)?(s.appendChild(r),o=null):c?(o||(o=u.create(c),s.appendChild(o)),o.appendChild(r)):s.appendChild(r)}return c?i||o.appendChild(u.create("br",{"data-mce-bogus":"1"})):s.appendChild(u.create("br")),s}function W(e){L(e,"dt")&&F(e,"dd")}function Q(e,t){if($(e))return{container:e,offset:t};var n=pt.getNode(e,t);return $(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&$(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&$(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}}function X(e){var t=e.cloneRange(),n=Q(e.startContainer,e.startOffset);return t.setStart(n.container,n.offset),e=Q(e.endContainer,e.endOffset),t.setEnd(e.container,e.offset),t}function z(e,t){return t=t||e.selection.getStart(!0),e.dom.getParent(t,"OL,UL,DL",Dt(e,t))}function Y(e){var t,n=e.selection.getSelectedBlocks();return St.grep((t=e,n=St.map(n,function(e){return t.dom.getParent(e,"li,dd,dt",Dt(t,e))||e}),At.unique(n)),function(e){return Nt(e)})}function G(e,t){return t=e.dom.getParents(t,"ol,ul",Dt(e,t)),u(t)}function J(e,t,n){return e.isSome()&&t.isSome()?Fe.some(n(e.getOrDie(),t.getOrDie())):Fe.none()}function Z(e,t,n){return e.fire("ListMutation",{action:t,element:n})}function ee(e,t){R(e.item,t.list)}function te(e,t){for(var n=0;n<e.length-1;n++)(function(e,t,n){if(!qe(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);void 0!==e.style&&Ve(e.style.getPropertyValue)&&e.style.setProperty(t,n)})(e[n].item.dom,"list-style-type","none");u(e).each(function(e){x(e.list,t.listAttributes),x(e.item,t.itemAttributes),M(e.item,t.content)})}function ne(e,t,n){return function(e){for(var t=1;t<e.length;t++)ee(e[t-1],e[t])}(e=function(e,t,n){for(var r,o=[],i=0;i<n;i++)o.push((r=t.listType,r={list:lt(r,r=e),item:lt("li",r)},R(r.list,r.item),r));return o}(e,n,n.depth-t.length)),te(e,n),n=e,J(u(t),v(n),ee),t.concat(e)}function re(e){return L(e,"OL,UL")}function oe(e){return B(e).map(re).getOr(!1)}function ie(e){return 0<e.depth}function ue(e){return e.isSelected}function ae(a){return f(a,function(u,e){var t,n,r=(t=a)[n=e].depth,o=function(e){return e.depth===r&&!e.dirty},i=function(e){return e.depth<r};m(h(t.slice(0,n)),o,i).orThunk(function(){return m(t.slice(n+1),o,i)}).fold(function(){var e,t,n,r,o,i;u.dirty&&(u.listAttributes=(e=u.listAttributes,n=function(e,t){return"start"!==t},r=t={},o=function(e,t){r[t]=e},i=s,T(e,function(e,t){(n(e,t)?o:i)(e,t)}),t))},function(e){u.listType=e.listType,u.listAttributes=ze({},e.listAttributes)})}),a}function se(n,u,a,s){return B(s).filter(re).fold(function(){u.each(function(e){O(e.start,s)&&a.set(!0)});var r,o,i,e=(r=s,o=n,i=a.get(),D(r).filter(k).map(function(e){return{depth:o,dirty:!1,isSelected:i,content:(n=w(t=r),n=I(t).map(re).getOr(!1)?n.slice(0,-1):n,c(n,_)),itemAttributes:A(r),listAttributes:A(e),listType:yt(e)};var t,n}));u.each(function(e){O(e.end,s)&&a.set(!1)});var t=I(s).filter(re).map(function(e){return Et(n,u,a,e)}).getOr([]);return e.toArray().concat(t)},function(e){return Et(n,u,a,e)})}function ce(e,t){var t=ae(t),n=e.contentDocument,t=r(t,function(e,t){return(t.depth>e.length?ne:function(o,e,i){e=e.slice(0,i.depth);return u(e).each(function(e){var t,n,r=(t=i.itemAttributes,r=i.content,n=lt("li",o),x(n,t),M(n,r),n);R((n=e).list,r),n.item=r,r=i,yt((e=e).list)!==r.listType&&(e.list=F(e.list,r.listType)),x(e.list,r.listAttributes)}),e})(n,e,t)},[]);return v(t).map(function(e){return e.list}).toArray()}function de(i,e,u){var t,n,r,o=(o=e,e=c(Y(i),mt),t=J(p(e,a(oe)),p(h(e),a(oe)),function(e,t){return{start:e,end:t}}),n=!1,r={get:function(){return n},set:function(e){n=e}},c(o,function(e){return{sourceList:e,entries:Et(0,t,r,e)}}));f(o,function(e){var t=e.entries,n=u;f(l(t,ue),function(e){return function(e){switch(n){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0}(e),0});var r,o,t=(r=i,t=e.entries,g(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],s=t(a);s!==n&&(r.push(o),o=[]),n=s,o.push(a)}return 0!==o.length&&r.push(o),r}(t,ie),function(e){return(v(e).map(ie).getOr(!1)?ce:function(n,e){e=ae(e);return c(e,function(e){var t,e=(e=e.content,t=document.createDocumentFragment(),f(e,function(e){t.appendChild(e.dom)}),mt(t));return mt(V(n,e.dom))})})(r,e)}));f(t,function(e){Z(i,"Indent"===u?"IndentList":"OutdentList",e.dom)}),o=e.sourceList,f(t,function(e){P(o,e)}),U(e.sourceList)})}function fe(e,t){var r,n,o=c((i=G(n=u=e,n.selection.getStart()),n=l(n.selection.getSelectedBlocks(),Ct),n=i.toArray().concat(n),wt(u,n)),mt),i=c(l(Y(e),Lt),mt),u=!1;return(o.length||i.length)&&(n=e.selection.getBookmark(),de(e,o,t),r=e,f(i,"Indent"===t?W:function(e){return t=r,L(n=e,"dd")?F(n,"dt"):L(n,"dt")&&D(n).each(function(e){return function(e,t,n){var r=xt.select('span[data-mce-type="bookmark"]',t),o=V(e,n),i=xt.createRng();i.setStartAfter(n),i.setEndAfter(t);for(var u,i=i.extractContents(),a=i.firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&e.dom.isEmpty(a)){xt.remove(a);break}e.dom.isEmpty(i)||xt.insertAfter(i,t),xt.insertAfter(o,t),H(e.dom,n.parentNode)&&(u=n.parentNode,St.each(r,function(e){u.parentNode.insertBefore(e,n.parentNode)}),xt.remove(u)),xt.remove(n),H(e.dom,t)&&xt.remove(t)}(t,e.dom,n.dom)}),0;var t,n}),e.selection.moveToBookmark(n),e.selection.setRng(X(e.selection.getRng())),e.nodeChanged(),u=!0),u}function le(e){return fe(e,"Flatten")}function me(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=Rt.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):Rt.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i}function pe(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,Rt.remove(t),!n.hasChildNodes()&&Rt.isBlock(n)&&n.appendChild(Rt.create("br"))),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=Rt.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),X(t)}function ge(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function he(e){return/\btox\-/.test(e.className)}function ve(e,t,n){function r(e){e=m(e.parents,bt,Tt).filter(function(e){return e.nodeName===t&&!he(e)}).isSome(),n(e)}var o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}}function ye(n,e){St.each(e,function(e,t){n.setAttribute(t,e)})}function Se(e,t,n){var r,o=e,i=n["list-style-type"]?n["list-style-type"]:null;o.setStyle(t,"list-style-type",i),e=e,ye(t=t,(r=n)["list-attributes"]),St.each(e.select("li",t),function(e){ye(e,r["list-item-attributes"])})}function be(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&kt(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(j(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function Ce(e,t,n){return o=n,(r=t)&&o&&bt(r)&&r.nodeName===o.nodeName&&(o=n,(e=e).getStyle(t,"list-style-type",!0)===e.getStyle(o,"list-style-type",!0))&&t.className===n.className;var r,o}function Oe(e,t,n){var r,i,o,u,a,s,c=z(e),d=(r=z(d=e),d=d.selection.getSelectedBlocks(),r&&1===d.length&&d[0]===r?St.grep(r.querySelectorAll("ol,ul,dl"),function(e){return bt(e)}):St.grep(d,function(e){return bt(e)&&r!==e}));n=n||{},c&&0<d.length?(i=e,o=d,u=t,a=n,(d=c).nodeName!==u||Ut(a)?(s=me(i.selection.getRng(!0)),St.each([d].concat(o),function(e){var t,n=i,r=u,o=a;(t=e).nodeName!==r?(e=n.dom.rename(t,r),Se(n.dom,e,o),Z(n,ge(r),e)):(Se(n.dom,t,o),Z(n,ge(r),t))}),i.selection.setRng(pe(s))):le(i)):(o=t,s=n,(t=c)!==(n=e).getBody()&&(t?t.nodeName!==o||Ut(s)||he(t)?(c=me(n.selection.getRng(!0)),Se(n.dom,t,s),e=n.dom.rename(t,o),Mt(n.dom,e),n.selection.setRng(pe(c)),Z(n,ge(o),e)):le(n):(function(u,a,s){void 0===s&&(s={});var e,t=u.selection.getRng(),c="LI",n=Dt(u,u.selection.getStart(!0)),d=u.dom;"false"!==d.getContentEditable(u.selection.getNode())&&("DL"===(a=a.toUpperCase())&&(c="DT"),e=me(t),St.each(function(n,e,r){for(var o,i=[],u=n.dom,t=be(n,e,!0,r),a=be(n,e,!1,r),s=[],c=t;c&&(s.push(c),c!==a);c=c.nextSibling);return St.each(s,function(e){if(j(n,e))return i.push(e),void(o=null);if(u.isBlock(e)||kt(e))return kt(e)&&u.remove(e),void(o=null);var t=e.nextSibling;Pt.isBookmarkNode(e)&&(j(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e))}),i}(u,t,n),function(e){var t,n,r,o,i=e.previousSibling;i&&bt(i)&&i.nodeName===a&&(n=s,d.getStyle(i,"list-style-type")===(n=null===(n=n?n["list-style-type"]:"")?"":n))?(t=i,e=d.rename(e,c),i.appendChild(e)):(t=d.create(a),e.parentNode.insertBefore(t,e),t.appendChild(e),e=d.rename(e,c)),r=d,o=e,St.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(e){var t;return r.setStyle(o,((t={})[e]="",t))}),Se(d,t,s),Mt(u.dom,t)}),u.selection.setRng(pe(e)))}(n,o,s),Z(n,ge(o),t))))}function Ne(e,t,n,r){var o=t.startContainer,t=t.startOffset;if($(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements();1===o.nodeType&&(o=pt.getNode(o,t));var u=new gt(o,r);for(n&&(r=e.dom,kt(e=o)&&r.isBlock(e.nextSibling)&&!kt(e.previousSibling)&&u.next());o=u[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if($(o)&&0<o.data.length)return o}}function Le(e,t){return 1===(t=t.childNodes).length&&!bt(t[0])&&e.isBlock(t[0])}function Te(t,e,n){var r,o=e.parentNode;K(t,e)&&K(t,n)&&(bt(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&kt(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&kt(o)&&e.hasChildNodes()&&t.remove(o),H(t,n,!0)&&t.$(n).empty(),function(e,t,n){var r,o,i=Le(e,n)?n.firstChild:n;if(Le(o=e,n=t)&&o.remove(n.firstChild,!0),!H(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}(t,e,n),r&&n.appendChild(r),n=N(mt(n),mt(e))?t.getParents(e,bt,n):[],t.remove(e),f(n,function(e){H(t,e)&&e!==t.getRoot()&&t.remove(e)}))}function ke(s,c){var e=s.dom,t=s.selection,n=t.getStart(),r=Dt(s,n),d=e.getParent(t.getStart(),"LI",r);if(d){n=d.parentNode;if(n===s.getBody()&&H(e,n))return!0;var f=X(t.getRng()),l=e.getParent(Ne(s,f,c,r),"LI",r);if(l&&l!==d)return s.undoManager.transact(function(){var e,t,n,r,o,i,u,a;c?(t=f,n=l,r=d,(a=(e=s).dom).isEmpty(r)?(i=n,(o=e).dom.$(u=r).empty(),Te(o.dom,i,u),o.selection.setCursorLocation(u)):(t=me(t),Te(a,n,r),e.selection.setRng(pe(t)))):d.parentNode.firstChild===d?It(s):function(e,t,n){var r=me(f);Te(e.dom,t,n);r=pe(r);e.selection.setRng(r)}(s,d,l)}),!0;if(!l&&!c&&0===f.startOffset&&0===f.endOffset)return s.undoManager.transact(function(){le(s)}),!0}return!1}function xe(e,t){return e.selection.isCollapsed()?ke(r=e,o=t)||function(r,o){var i=r.dom,e=r.selection.getStart(),u=Dt(r,e),a=i.getParent(e,i.isBlock,u);if(a&&i.isEmpty(a)){var e=X(r.selection.getRng()),s=i.getParent(Ne(r,e,o,u),"LI",u);if(s)return r.undoManager.transact(function(){var e,t=a,n=(e=i).getParent(t.parentNode,e.isBlock,u);e.remove(t),n&&e.isEmpty(n)&&e.remove(n),Mt(i,s.parentNode),r.selection.select(s,!0),r.selection.collapse(o)}),!0}return!1}(r,o):(o=(n=e).selection.getStart(),e=Dt(n,o),!!(n.dom.getParent(o,"LI,DT,DD",e)||0<Y(n).length)&&(n.undoManager.transact(function(){var o,e;n.execCommand("Delete"),o=n.dom,e=n.getBody(),St.each(St.grep(o.select("ol,ul",e)),function(e){var t,n,r=o;"LI"===(e=(t=e).parentNode).nodeName&&e.firstChild===t&&((n=e.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),H(r,e)&&_t.remove(e)):_t.setStyle(e,"listStyleType","none")),bt(e)&&(n=e.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)})}),!0));var n,r,o}function Ae(n){var r=n.dom,e=z(n);Ot(e)&&n.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:r.getAttrib(e,"start")||"1"},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var t=e.getData();n.undoManager.transact(function(){r.setAttrib(z(n),"start","1"===t.start?"":t.start)}),e.close()}})}function De(t,n){return function(){var e=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return e&&e.nodeName===n}}var we,Ee,Be,Ie=tinymce.util.Tools.resolve("tinymce.PluginManager"),Pe=d(!1),Re=d(!0),Me=function(){return Ue},Ue={fold:function(e,t){return e()},is:Pe,isSome:Pe,isNone:Re,getOr:je=function(e){return e},getOrThunk:$e=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:je,orThunk:$e,map:Me,each:s,bind:Me,exists:Pe,forall:Re,filter:Me,equals:je=function(e){return e.isNone()},equals_:je,toArray:function(){return[]},toString:d("none()")},_e=function(n){function e(){return o}function t(e){return e(n)}var r=d(n),o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:Re,isNone:Pe,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return _e(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:Ue},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(Pe,function(e){return t(n,e)})}};return o},Fe={some:_e,none:Me,from:function(e){return null==e?Ue:_e(e)}},$e=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}},je=function(t){return function(e){return typeof e===t}},qe=$e("string"),He=$e("array"),Ke=je("boolean"),Ve=je("function"),We=je("number"),Qe=Array.prototype.slice,Xe=Array.prototype.push,ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ye=function(e,t){return{major:e,minor:t}},Ge=function(e,t){t=String(t).toLowerCase();return 0===e.length?n():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Ye(e(1),e(2))}(e,t)},Je=n,Me=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$e=function(t){return function(e){return o(e,t)}},je=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return o(e,"edge/")&&o(e,"chrome")&&o(e,"safari")&&o(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Me],search:function(e){return o(e,"chrome")&&!o(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return o(e,"msie")||o(e,"trident")}},{name:"Opera",versionRegexes:[Me,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$e("firefox")},{name:"Safari",versionRegexes:[Me,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(o(e,"safari")||o(e,"mobile/"))&&o(e,"applewebkit")}}],Me=[{name:"Windows",search:$e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return o(e,"iphone")||o(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$e("linux"),versionRegexes:[]},{name:"Solaris",search:$e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ze={browsers:d(je),oses:d(Me)},et="Edge",tt="Firefox",nt=function(){return e({current:void 0,version:Je()})},rt=e,ot=(d(et),d("Chrome"),d("IE"),d("Opera"),d(tt),d("Safari"),"Windows"),it="Android",ut="Solaris",at="FreeBSD",st="ChromeOS",ct=function(){return i({current:void 0,version:Je()})},dt=i,ft=(d(ot),d("iOS"),d(it),d("Linux"),d("OSX"),d(ut),d(at),d(st),Be=!(we=function(){return S(navigator.userAgent,b)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Be||(Be=!0,Ee=we.apply(null,e)),Ee}),lt=function(e,t){e=(t||document).createElement(e);return C(e)},mt=C,pt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),gt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ht=tinymce.util.Tools.resolve("tinymce.util.VK"),vt=Object.keys,yt=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),$e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),St=tinymce.util.Tools.resolve("tinymce.util.Tools"),je=function(t){return function(e){return e&&e.nodeName.toLowerCase()===t}},Me=function(t){return function(e){return e&&t.test(e.nodeName)}},bt=Me(/^(OL|UL|DL)$/),Ct=Me(/^(OL|UL)$/),Ot=je("ol"),Nt=Me(/^(LI|DT|DD)$/),Lt=Me(/^(DT|DD)$/),Tt=Me(/^(TH|TD)$/),kt=je("br"),xt=$e.DOM,At=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Dt=function(e,t){t=e.dom.getParents(t,"TD,TH");return 0<t.length?t[0]:e.getBody()},wt=function(t,e){e=c(e,function(e){return G(t,e).getOr(e)});return At.unique(e)},Et=function(t,n,r,e){return g(w(e),function(e){return(re(e)?Et:se)(t+1,n,r,e)})},Bt=function(e){return fe(e,"Indent")},It=function(e){return fe(e,"Outdent")},Pt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Rt=$e.DOM,Mt=function(e,t){var n,r=t.nextSibling;if(Ce(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,Ce(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Ut=function(e){return"list-style-type"in e},_t=$e.DOM;Ie.add("lists",function(e){var n,t,r,o,i,u,a;return!1===e.hasPlugin("rtc",!0)&&((i=e).getParam("lists_indent_on_tab",!0)&&(u=i).on("keydown",function(e){e.keyCode!==ht.TAB||ht.metaKeyPressed(e)||u.undoManager.transact(function(){(e.shiftKey?It:Bt)(u)&&e.preventDefault()})}),(a=i).on("keydown",function(e){e.keyCode===ht.BACKSPACE?xe(a,!1)&&e.preventDefault():e.keyCode===ht.DELETE&&xe(a,!0)&&e.preventDefault()}),(n=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?Bt(n):"outdent"===e&&It(n)}),n.addCommand("InsertUnorderedList",function(e,t){Oe(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){Oe(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){Oe(n,"DL",t)}),n.addCommand("RemoveList",function(){le(n)}),n.addCommand("mceListProps",function(){Ae(n)}),n.addQueryStateHandler("InsertUnorderedList",De(n,"UL")),n.addQueryStateHandler("InsertOrderedList",De(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",De(n,"DL"))),i=function(e){return function(){return t.execCommand(e)}},(t=e).hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:i("InsertOrderedList"),onSetup:function(e){return ve(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:i("InsertUnorderedList"),onSetup:function(e){return ve(t,"UL",e.setActive)}})),i={text:"List properties...",icon:"ordered-list",onAction:function(){return Ae(r)},onSetup:function(t){return ve(r,"OL",function(e){return t.setDisabled(!e)})}},(r=e).ui.registry.addMenuItem("listprops",i),r.ui.registry.addContextMenu("lists",{update:function(e){e=z(r,e);return Ot(e)?["listprops"]:[]}}),o=e,{backspaceDelete:function(e){xe(o,e)}}})}();