!function(){"use strict";function l(n){return function(){return n}}function a(n){return n}var y=function(){};function h(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=o.concat(n);return r.apply(null,e)}}function g(t){return function(n){return!t(n)}}var c=l(!1),C=l(!0),n=function(){return u},u={fold:function(n,t){return n()},is:c,isSome:c,isNone:C,getOr:r,getOrThunk:e,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:r,orThunk:e,map:n,each:y,bind:n,exists:c,forall:C,filter:n,equals:t,equals_:t,toArray:function(){return[]},toString:l("none()")};function t(n){return n.isNone()}function e(n){return n()}function r(n){return n}function i(n){return!(null==n)}function x(n,t){return-1<q.call(n,t)}function d(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return!0;return!1}function p(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e}function S(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r}function T(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e)}function b(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e}function s(n,t,e){return function(n,t){for(var e=n.length-1;0<=e;e--)t(n[e],e)}(n,function(n){e=t(e,n)}),e}function f(n,t,e){return T(n,function(n){e=t(e,n)}),e}function m(n,t){return function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return P.some(u);if(e(u,r))break}return P.none()}(n,t,c)}function v(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return P.some(e);return P.none()}function w(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!_(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);V.apply(t,n[e])}return t}function R(n,t){return w(S(n,t))}function O(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e))return!1;return!0}function o(n){return[n]}function D(n,t){return 0<=t&&t<n.length?P.some(n[t]):P.none()}function A(n){return D(n,n.length-1)}function I(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return P.none()}var B,E=function(e){function n(){return o}function t(n){return n(e)}var r=l(e),o={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:C,isNone:c,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return E(n(e))},each:function(n){n(e)},bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:u},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(n){return n.is(e)},equals_:function(n,t){return n.fold(c,function(n){return t(e,n)})}};return o},P={some:E,none:n,from:function(n){return null==n?u:E(n)}},k=function(e){return function(n){return n=typeof(t=n),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e;var t}},M=function(t){return function(n){return typeof n===t}},N=k("string"),j=k("object"),_=k("array"),z=M("boolean"),W=(B=void 0,function(n){return B===n}),F=M("function"),L=M("number"),H=Array.prototype.slice,q=Array.prototype.indexOf,V=Array.prototype.push,U=function(){return(U=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function $(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),o=0,t=0;t<e;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}function G(e){var r,o=!1;return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return o||(o=!0,r=e.apply(null,n)),r}}function K(n,t){var e=String(t).toLowerCase();return m(n,function(n){return n.search(e)})}function X(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t}function Y(n,t){return-1!==n.indexOf(t)}function J(n,t){return X(n,t,0)}function Q(n,t){return X(n,t,n.length-t.length)}function Z(n){return 0<n.length}function nn(n){return window.matchMedia(n).matches}function tn(n,t){if(1!==(n=n.dom).nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}function en(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function rn(n,t){return e=n.dom,n=t.dom,t=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(e.compareDocumentPosition(n)&t);var e}function on(n,t){return(nt().browser.isIE()?rn:function(n,t){n=n.dom,t=t.dom;return n!==t&&n.contains(t)})(n,t)}function un(n,t){for(var e=ut(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}}function cn(n,e){return ct(n,function(n,t){return{k:t,v:e(n,t)}})}function ln(n,t){var e,r,o,u,i={};return e=t,u=i,r=function(n,t){u[t]=n},o=y,un(n,function(n,t){(e(n,t)?r:o)(n,t)}),i}function an(n){return e=function(n){return n},r=[],un(n,function(n,t){r.push(e(n,t))}),r;var e,r}function fn(n,t){return lt(n,t)?P.from(n[t]):P.none()}function sn(n,t,e){return{element:n,rowspan:t,colspan:e}}function mn(n,t,e){return{element:n,cells:t,section:e}}function dn(n,t){return{element:n,isNew:t}}function gn(n,t){return{cells:n,section:t}}function pn(n){return n.dom.nodeType}function hn(n){return 8===pn(n)||"#comment"===ft(n)}function bn(n){return et.fromDom(n.dom.ownerDocument)}function vn(n){return gt(n)?n:bn(n)}function wn(n){return P.from(n.dom.parentNode).map(et.fromDom)}function yn(n,t){for(var e=F(t)?t:c,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=et.fromDom(u);if(o.push(i),!0===e(i))break;r=u}return o}function Cn(n){return P.from(n.dom.previousSibling).map(et.fromDom)}function xn(n){return P.from(n.dom.nextSibling).map(et.fromDom)}function Sn(n){return S(n.dom.childNodes,et.fromDom)}function Tn(n,t){return n=n.dom.childNodes,P.from(n[t]).map(et.fromDom)}function Rn(n){return n=vt(n),pt(n)?P.some(n):P.none()}function On(n){return et.fromDom(n.dom.host)}function Dn(n){if(bt()&&i(n.target)){var t=et.fromDom(n.target);if(mt(t)&&wt(t)&&n.composed&&n.composedPath){t=n.composedPath();if(t)return D(t,0)}}return P.from(n.target)}function An(n,t,e){return r=function(n){return tn(n,t)},b(yn(n,e),r);var r}function In(n,t){return e=function(n){return tn(n,t)},b(Sn(n),e);var e}function Bn(n,t){return function(n,t){t=void 0===t?document:t.dom;return en(t)?[]:S(t.querySelectorAll(n),et.fromDom)}(t,n)}var En,Pn=function(){return kn(0,0)},kn=function(n,t){return{major:n,minor:t}},Mn={nu:kn,detect:function(n,t){t=String(t).toLowerCase();return 0===n.length?Pn():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};n=function(n){return Number(t.replace(e,"$"+n))};return kn(n(1),n(2))}(n,t)},unknown:Pn},Nn=function(n,e){return K(n,e).map(function(n){var t=Mn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},jn=function(n,e){return K(n,e).map(function(n){var t=Mn.detect(n.versionRegexes,e);return{current:n.name,version:t}})},_n=(En=/^\s+|\s+$/g,function(n){return n.replace(En,"")}),zn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wn=function(t){return function(n){return Y(n,t)}},Fn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Y(n,"edge/")&&Y(n,"chrome")&&Y(n,"safari")&&Y(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,zn],search:function(n){return Y(n,"chrome")&&!Y(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Y(n,"msie")||Y(n,"trident")}},{name:"Opera",versionRegexes:[zn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wn("firefox")},{name:"Safari",versionRegexes:[zn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Y(n,"safari")||Y(n,"mobile/"))&&Y(n,"applewebkit")}}],Ln=[{name:"Windows",search:Wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Y(n,"iphone")||Y(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Wn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wn("linux"),versionRegexes:[]},{name:"Solaris",search:Wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Wn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hn={browsers:l(Fn),oses:l(Ln)},qn="Firefox",Vn=function(n){var t=n.current,e=n.version,n=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(qn),isSafari:n("Safari")}},Un={unknown:function(){return Vn({current:void 0,version:Mn.unknown()})},nu:Vn,edge:l("Edge"),chrome:l("Chrome"),ie:l("IE"),opera:l("Opera"),firefox:l(qn),safari:l("Safari")},$n="Windows",Gn="Android",Kn="Solaris",Xn="FreeBSD",Yn="ChromeOS",Jn=function(n){var t=n.current,e=n.version,n=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:n($n),isiOS:n("iOS"),isAndroid:n(Gn),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(Kn),isFreeBSD:n(Xn),isChromeOS:n(Yn)}},Qn={unknown:function(){return Jn({current:void 0,version:Mn.unknown()})},nu:Jn,windows:l($n),ios:l("iOS"),android:l(Gn),linux:l("Linux"),osx:l("OSX"),solaris:l(Kn),freebsd:l(Xn),chromeos:l(Yn)},Zn=function(n,t){var e,r,o=Hn.browsers(),u=Hn.oses(),i=Nn(o,n).fold(Un.unknown,Un.nu),c=jn(u,n).fold(Qn.unknown,Qn.nu);return{browser:i,os:c,deviceType:(e=i,r=n,o=t,i=(u=c).isiOS()&&!0===/ipad/i.test(r),n=u.isiOS()&&!i,t=u.isiOS()||u.isAndroid(),c=t||o("(pointer:coarse)"),o=i||!n&&t&&o("(min-device-width:768px)"),t=n||t&&!o,r=e.isSafari()&&u.isiOS()&&!1===/safari/i.test(r),{isiPad:l(i),isiPhone:l(n),isTablet:l(o),isPhone:l(t),isTouch:l(c),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:l(r),isDesktop:l(!t&&!o&&!r)})}},nt=G(function(){return Zn(navigator.userAgent,nn)}),tt=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},et={fromHtml:function(n,t){t=(t||document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return tt(t.childNodes[0])},fromTag:function(n,t){n=(t||document).createElement(n);return tt(n)},fromText:function(n,t){n=(t||document).createTextNode(n);return tt(n)},fromDom:tt,fromPoint:function(n,t,e){return P.from(n.dom.elementFromPoint(t,e)).map(tt)}},rt=function(n,t){return n.dom===t.dom},ot=tn,ut=Object.keys,it=Object.hasOwnProperty,ct=function(n,e){var r={};return un(n,function(n,t){t=e(n,t);r[t.k]=t.v}),r},lt=function(n,t){return it.call(n,t)},at=["tfoot","thead","tbody","colgroup"],ft=("undefined"!=typeof window||Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),st=function(t){return function(n){return pn(n)===t}},mt=st(1),dt=st(3),gt=st(9),pt=st(11),ht=F(Element.prototype.attachShadow)&&F(Node.prototype.getRootNode),bt=l(ht),vt=ht?function(n){return et.fromDom(n.dom.getRootNode())}:vn,wt=function(n){return i(n.dom.shadowRoot)},yt=function(n){var t=dt(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var e,r,o=t.ownerDocument;return Rn(et.fromDom(t)).fold(function(){return o.body.contains(t)},(e=yt,r=On,function(n){return e(r(n))}))},Ct=function(n){n=n.dom.body;if(null==n)throw new Error("Body is not available yet");return et.fromDom(n)},xt=function(n,t){var e=[];return T(Sn(n),function(n){e=(e=t(n)?e.concat([n]):e).concat(xt(n,t))}),e};function St(n,t,e,r,o){return n(e,r)?P.some(e):F(o)&&o(e)?P.none():t(e,r,o)}function Tt(n,t,e){for(var r=n.dom,o=F(e)?e:c;r.parentNode;){var r=r.parentNode,u=et.fromDom(r);if(t(u))return P.some(u);if(o(u))break}return P.none()}function Rt(n,t,e){return Tt(n,function(n){return tn(n,t)},e)}function Ot(n,t){return e=function(n){return tn(n,t)},m(n.dom.childNodes,function(n){return e(et.fromDom(n))}).map(et.fromDom);var e}function Dt(n,t){return function(n,t){t=void 0===t?document:t.dom;return en(t)?P.none():P.from(t.querySelector(n)).map(et.fromDom)}(t,n)}function At(n,t,e){return St(tn,Rt,n,t,e)}function It(n,t,e){if(!(N(e)||z(e)||L(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")}function Bt(n,t,e){It(n.dom,t,e)}function Et(n,t){var e=n.dom;un(t,function(n,t){It(e,t,n)})}function Pt(n,t){return null===(t=n.dom.getAttribute(t))?void 0:t}function kt(n,t){return P.from(Pt(n,t))}function Mt(n,t){n.dom.removeAttribute(t)}function Nt(n){return f(n.dom.attributes,function(n,t){return n[t.name]=t.value,n},{})}function jt(n){return void 0!==n.style&&F(n.style.getPropertyValue)}function _t(n,t,e){if(!N(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);jt(n)&&n.style.setProperty(t,e)}function zt(n,t,e){n=n.dom,_t(n,t,e)}function Wt(n,t){var e=n.dom;un(t,function(n,t){_t(e,t,n)})}function Ft(n,t){var e=n.dom,r=window.getComputedStyle(e).getPropertyValue(t);return""!==r||yt(n)?r:we(e,t)}function Lt(n,t){return n=n.dom,t=we(n,t),P.from(t).filter(function(n){return 0<n.length})}function Ht(n,t){var e=n.dom;t=t,jt(e=e)&&e.style.removeProperty(t),kt(n,"style").map(_n).is("")&&Mt(n,"style")}function qt(n,t,e){return void 0===e&&(e=0),kt(n,t).map(function(n){return parseInt(n,10)}).getOr(e)}function Vt(n,t){return qt(n,t,1)}function Ut(n){return 1<Vt(n,"colspan")}function $t(n){return 1<Vt(n,"rowspan")}function Gt(n,t){return parseInt(Ft(n,t),10)}function Kt(n,t){return xe(n,t,C)}function Xt(n,t){return function(n,t,e){if((e=void 0===e?c:e)(t))return P.none();if(x(n,ft(t)))return P.some(t);return Rt(t,n.join(","),function(n){return tn(n,"table")||e(n)})}(["td","th"],n,t)}function Yt(n){return Kt(n,"th,td")}function Jt(n){return tn(n,"colgroup")?In(n,"col"):R(Te(n),function(n){return In(n,"col")})}function Qt(n){return Kt(n,"tr")}function Zt(n,e){return S(n,function(n){if("colgroup"===ft(n)){var t=S(Jt(n),function(n){var t=qt(n,"span",1);return sn(n,1,t)});return mn(n,t,"colgroup")}t=S(Yt(n),function(n){var t=qt(n,"rowspan",1),e=qt(n,"colspan",1);return sn(n,t,e)});return mn(n,t,e(n))})}function ne(n){return wn(n).map(function(n){n=ft(n);return x(at,n)?n:"tbody"}).getOr("tbody")}function te(n){var t=Qt(n),t=$(Te(n),t);return Zt(t,ne)}function ee(n){var c={},t=[],e={},u=0,l=0,a=0;return T(n,function(n){var i,r,o;"colgroup"===n.section?(r={},o=0,T(n.cells,function(t){var e=t.colspan;p(e,function(n){n=o+n;r[n]={element:t.element,colspan:e,column:n}}),o+=e}),e=r):(i=[],T(n.cells,function(n){for(var t=0;void 0!==c[a+","+t];)t++;for(var e={element:n.element,rowspan:n.rowspan,colspan:n.colspan,row:a,column:t},r=0;r<n.colspan;r++)for(var o=0;o<n.rowspan;o++){var u=t+r;c[a+o+","+u]=e,l=Math.max(l,u+1)}i.push(e)}),u++,t.push(mn(n.element,i,n.section)),a++)}),{grid:{rows:u,columns:l},access:c,all:t,columns:e}}function re(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,t=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&t>=n.startRow}function oe(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow}function ue(n,t,e){var t=Oe.findItem(n,t,rt),r=Oe.findItem(n,e,rt);return t.bind(function(e){return r.map(function(n){return t=e,n=n,{startRow:Math.min(t.row,n.row),startCol:Math.min(t.column,n.column),finishRow:Math.max(t.row+t.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(t.column+t.colspan-1,n.column+n.colspan-1)};var t})})}function ie(t,n,e){return ue(t,n,e).bind(function(n){return function(n,t){for(var e=!0,r=h(oe,t),o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)e=e&&Oe.getAt(n,o,u).exists(r);return e?P.some(t):P.none()}(t,n)})}function ce(t,n,e){return ue(t,n,e).map(function(n){n=Oe.filterItems(t,h(re,n));return S(n,function(n){return n.element})})}function le(n,t){return Oe.findItem(n,t,function(n,t){return on(t,n)}).map(function(n){return n.element})}function ae(t,u,i){return Se(t).bind(function(n){var e,r,o,n=De(n);return e=n,r=u,o=i,Oe.findItem(e,t,rt).bind(function(n){var t=0<r?n.row+n.rowspan-1:n.row,n=0<o?n.column+n.colspan-1:n.column;return Oe.getAt(e,t+r,n+o).map(function(n){return n.element})})})}function fe(n,t,e,r,o){var u=De(n),t=rt(n,e)?P.some(t):le(u,t),i=rt(n,o)?P.some(r):le(u,r);return t.bind(function(t){return i.bind(function(n){return ce(u,t,n)})})}function se(t,e){wn(t).each(function(n){n.dom.insertBefore(e.dom,t.dom)})}function me(n,t){xn(n).fold(function(){wn(n).each(function(n){Ae(n,t)})},function(n){se(n,t)})}function de(t,e){Tn(t,0).fold(function(){Ae(t,e)},function(n){t.dom.insertBefore(e.dom,n.dom)})}function ge(n,t){se(n,t),Ae(t,n)}function pe(e,r){T(r,function(n,t){t=0===t?e:r[t-1];me(t,n)})}function he(t,n){T(n,function(n){Ae(t,n)})}function be(n){n.dom.textContent="",T(Sn(n),function(n){Ie(n)})}function ve(n){var t,e=Sn(n);0<e.length&&(t=n,T(e,function(n){se(t,n)})),Ie(n)}var we=function(n,t){return jt(n)?n.style.getPropertyValue(t):""},ye=l(10),Ce=l(10),xe=function(n,t,e){return R(Sn(n),function(n){return tn(n,t)?e(n)?[n]:[]:xe(n,t,e)})},Se=function(n,t){return At(n,"table",t)},Te=function(n){return Se(n).fold(l([]),function(n){return In(n,"colgroup")})},Re=function(n,t){n=R(n.all,function(n){return n.cells});return b(n,t)},Oe={fromTable:function(n){n=te(n);return ee(n)},generate:ee,getAt:function(n,t,e){e=n.access[t+","+e];return void 0!==e?P.some(e):P.none()},findItem:function(n,t,e){n=Re(n,function(n){return e(t,n.element)});return 0<n.length?P.some(n[0]):P.none()},filterItems:Re,justCells:function(n){return R(n.all,function(n){return n.cells})},justColumns:function(n){return an(n.columns)},hasColumns:function(n){return 0<ut(n.columns).length},getColumnAt:function(n,t){return P.from(n.columns[t])}},De=Oe.fromTable,Ae=function(n,t){n.dom.appendChild(t.dom)},Ie=function(n){n=n.dom;null!==n.parentNode&&n.parentNode.removeChild(n)};function Be(n){return je.get(n)}function Ee(n){return je.getOption(n)}function Pe(n,t){return je.set(n,t)}var ke,Me,Ne,je=(ke=dt,Me="text",{get:function(n){if(!ke(n))throw new Error("Can only get "+Me+" value of a "+Me+" node");return Ne(n).getOr("")},getOption:Ne=function(n){return ke(n)?P.from(n.dom.nodeValue):P.none()},set:function(n,t){if(!ke(n))throw new Error("Can only set raw "+Me+" value of a "+Me+" node");n.dom.nodeValue=t}}),_e=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function ze(){return{up:l({selector:Rt,closest:At,predicate:Tt,all:yn}),down:l({selector:Bn,predicate:xt}),styles:l({get:Ft,getRaw:Lt,set:zt,remove:Ht}),attrs:l({get:Pt,set:Bt,remove:Mt,copyTo:function(n,t){n=Nt(n);Et(t,n)}}),insert:l({before:se,after:me,afterAll:pe,append:Ae,appendAll:he,prepend:de,wrap:ge}),remove:l({unwrap:ve,remove:Ie}),create:l({nu:et.fromTag,clone:function(n){return et.fromDom(n.dom.cloneNode(!1))},text:et.fromText}),query:l({comparePosition:function(n,t){return n.dom.compareDocumentPosition(t.dom)},prevSibling:Cn,nextSibling:xn}),property:l({children:Sn,name:ft,parent:wn,document:function(n){return vn(n).dom},isText:dt,isComment:hn,isElement:mt,getText:Be,setText:Pe,isBoundary:function(n){return!!mt(n)&&("body"===ft(n)||x(_e,ft(n)))},isEmptyTag:function(n){return!!mt(n)&&x(["br","img","hr","input"],ft(n))},isNonEditable:function(n){return mt(n)&&"false"===Pt(n,"contenteditable")}}),eq:rt,is:ot}}function We(n){return Rt(n,"table")}function Fe(u,i,c){function l(t){return function(n){return void 0!==c&&c(n)||rt(n,t)}}return rt(u,i)?P.some({boxes:P.some([u]),start:u,finish:i}):We(u).bind(function(o){return We(i).bind(function(r){if(rt(o,r))return P.some({boxes:function(n,t,e){n=De(n);return ce(n,t,e)}(o,u,i),start:u,finish:i});if(on(o,r)){var n=0<(t=An(i,"td,th",l(o))).length?t[t.length-1]:i;return P.some({boxes:fe(o,u,o,i,r),start:u,finish:n})}if(on(r,o)){var t=0<(t=An(u,"td,th",l(r))).length?t[t.length-1]:u;return P.some({boxes:fe(r,u,o,i,r),start:u,finish:t})}return wr(yr,u,i,e).shared.bind(function(n){return At(n,"table",c).bind(function(n){var t=An(i,"td,th",l(n)),e=0<t.length?t[t.length-1]:i,t=An(u,"td,th",l(n)),t=0<t.length?t[t.length-1]:u;return P.some({boxes:fe(n,u,o,i,r),start:t,finish:e})})});var e})})}function Le(n,t){return 0<(t=Bn(n,t)).length?P.some(t):P.none()}function He(n,t,r){return Dt(n,t).bind(function(e){return Dt(n,r).bind(function(t){return Cr(We,[e,t]).map(function(n){return{first:e,last:t,table:n}})})})}function qe(n,t,e,r,o){return u=o,m(n,function(n){return tn(n,u)}).bind(function(n){return ae(n,t,e).bind(function(n){return e=r,Rt(t=n,"table").bind(function(n){return Dt(n,e).bind(function(n){return Fe(n,t).bind(function(t){return t.boxes.map(function(n){return{boxes:n,start:t.start,finish:t.finish}})})})});var t,e})});var u}function Ve(u,n,t){return He(u,n,t).bind(function(e){function n(n){return rt(u,n)}var t="thead,tfoot,tbody,table",r=Rt(e.first,t,n),o=Rt(e.last,t,n);return r.bind(function(t){return o.bind(function(n){return rt(t,n)?function(n,t,e){n=De(n);return ie(n,t,e)}(e.table,e.first,e.last):P.none()})})})}function Ue(n,t,e,r){return n.fold(t,e,r)}function $e(n,t,e,r){for(var o=t.grid.columns,u=t.grid.rows,i=0;i<u;i++)for(var c=!1,l=0;l<o;l++)i<e.minRow||i>e.maxRow||l<e.minCol||l>e.maxCol||(Oe.getAt(t,i,l).filter(r).isNone()?function(n,t,e){n=n[e].element,e=et.fromTag("td");Ae(e,et.fromTag("br")),(t?Ae:de)(n,e)}(n,c,i):c=!0)}function Ge(n,t){var o,u,i,c,l,e=function(n){return tn(n.element,t)},r=te(n),a=Oe.generate(r),f=(o=e,m=a.grid.columns,u=a.grid.rows,i=m,l=c=0,un(a.access,function(n){var t,e,r;o(n)&&(e=(t=n.row)+n.rowspan-1,n=(r=n.column)+n.colspan-1,t<u?u=t:c<e&&(c=e),r<i?i=r:l<n&&(l=n))}),{minRow:u,minCol:i,maxRow:c,maxCol:l}),s="th:not("+t+"),td:not("+t+")",m=xe(n,"th,td",function(n){return tn(n,s)});return T(m,Ie),$e(r,a,f,e),a=f,f=b(Kt(e=n,"tr"),function(n){return 0===n.dom.childElementCount}),T(f,Ie),a.minCol!==a.maxCol&&a.minRow!==a.maxRow||T(Kt(e,"th,td"),function(n){Mt(n,"rowspan"),Mt(n,"colspan")}),Mt(e,"width"),Mt(e,"height"),Ht(e,"width"),Ht(e,"height"),n}function Ke(n){return"img"===ft(n)?1:Ee(n).fold(function(){return Sn(n).length},function(n){return n.length})}function Xe(n){return Ee(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("Â ")}).isSome()||x(Ar,ft(n))}function Ye(n){return r=Xe,(o=function(n){for(var t=0;t<n.childNodes.length;t++){var e=et.fromDom(n.childNodes[t]);if(r(e))return P.some(e);e=o(n.childNodes[t]);if(e.isSome())return e}return P.none()})(n.dom);var r,o}function Je(n){return Ir(n,Xe)}function Qe(n,t){return et.fromDom(n.dom.cloneNode(t))}function Ze(n){return Qe(n,!1)}function nr(n){return Qe(n,!0)}function tr(n,t){return t=function(n,t){t=et.fromTag(t),n=Nt(n);return Et(t,n),t}(n,t),n=Sn(nr(n)),he(t,n),t}function er(){var n=et.fromTag("td");return Ae(n,et.fromTag("br")),n}function rr(){return et.fromTag("col")}function or(){return et.fromTag("colgroup")}function ur(n,t,e){var r=tr(n,t);return un(e,function(n,t){null===n?Mt(r,t):Bt(r,t,n)}),r}function ir(n){return n}function cr(n){return function(){return et.fromTag("tr",n.dom)}}function lr(n){return{col:rr,colgroup:or,row:cr(n),cell:er,replace:ir,gap:er}}function ar(n){return S(n,et.fromDom)}function fr(n){return Ue(n.get(),l([]),a,o)}function sr(n){function t(n,t){return kt(n,t).exists(function(n){return 1<parseInt(n,10)})}return 0<(n=fr(n)).length&&O(n,function(n){return t(n,"rowspan")||t(n,"colspan")})?P.some(n):P.none()}function mr(n){return{element:n,mergable:P.none(),unmergable:P.none(),selection:[n]}}function dr(n,t,e){return{element:e,mergable:(r=t,o=Pr,Ue(n.get(),P.none,function(t){return t.length<=1?P.none():Ve(r,o.firstSelectedSelector,o.lastSelectedSelector).map(function(n){return{bounds:n,cells:t}})},P.none)),unmergable:sr(n),selection:fr(n)};var r,o}function gr(n,t,r,o,u){var i=n.slice(0),n=(t=t,0===(n=n).length?Mr.none():1===n.length?Mr.only(0):0===t?Mr.left(0,1):t===n.length-1?Mr.right(t-1,t):0<t&&t<n.length-1?Mr.middle(t-1,t,t+1):Mr.none()),t=l(S(i,l(0)));return n.fold(t,function(n){return o.singleColumnWidth(i[n],r)},function(n,t){return u.calcLeftEdgeDeltas(i,n,t,r,o.minCellWidth(),o.isRelative)},function(n,t,e){return u.calcMiddleDeltas(i,n,t,e,r,o.minCellWidth(),o.isRelative)},function(n,t){return u.calcRightEdgeDeltas(i,n,t,r,o.minCellWidth(),o.isRelative)})}function pr(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t}var hr=function(e,r,n,t){n=r(e,n);return s(t,function(n,t){t=r(e,t);return br(e,n,t)},n)},br=function(t,n,e){return n.bind(function(n){return e.filter(h(t.eq,n))})},vr=function(n,t,e){return 0<e.length?hr(n,t,e[0],e.slice(1)):P.none()},wr=function(t,n,e,r){void 0===r&&(r=c);var o=[n].concat(t.up().all(n)),n=[e].concat(t.up().all(e)),e=function(t){return v(t,r).fold(function(){return t},function(n){return t.slice(0,n+1)})},o=e(o),u=e(n),n=m(o,function(n){return d(u,h(t.eq,n))});return{firstpath:o,secondpath:u,shared:n}},yr=ze(),Cr=function(e,n){return vr(yr,function(n,t){return e(t)},n)},xr=Le,n=function(i){if(!_(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],e={};return T(i,function(n,r){var t=ut(n);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],u=n[o];if(void 0!==e[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!_(u))throw new Error("case arguments must be an array");c.push(o),e[o]=function(){var n=arguments.length;if(n!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+n);for(var e=new Array(n),t=0;t<e.length;t++)e[t]=arguments[t];return{fold:function(){if(arguments.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+arguments.length);return arguments[r].apply(null,e)},match:function(n){var t=ut(n);if(c.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+t.join(","));if(!O(c,function(n){return x(t,n)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+c.join(", "));return n[o].apply(null,e)},log:function(n){console.log(n,{constructors:c,constructor:o,params:e})}}}}),e},k=n([{none:[]},{multiple:["elements"]},{single:["element"]}]),Sr=k.none,Tr=k.multiple,Rr=k.single,Or=function(n,t,e){return{get:function(){return xr(n(),e).fold(function(){return t().map(Rr).getOrThunk(Sr)},function(n){return Tr(n)})}}},Dr=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ar=["img","br"],Ir=function(n,o){var u=function(n){for(var t=Sn(n),e=t.length-1;0<=e;e--){var r=t[e];if(o(r))return P.some(r);r=u(r);if(r.isSome())return r}return P.none()};return u(n)},Br={scope:["row","col"]},Er=function(l,n,a){function f(n,t){!function(n,t){n=n.dom,t=t.dom;jt(n)&&jt(t)&&(t.style.cssText=n.style.cssText)}(n.element,t),Ht(t,"height"),1!==n.colspan&&Ht(n.element,"width")}return{col:function(n){var t=bn(n.element),t=et.fromTag(ft(n.element),t.dom);return f(n,t),l(n.element,t),t},colgroup:or,row:cr(n),cell:function(n){var e,r,o,u,i,t=bn(n.element),c=et.fromTag(ft(n.element),t.dom),t=a.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),t=0<t.length?(e=n.element,r=c,o=t,Ye(e).map(function(n){var t=o.join(","),t=An(n,t,function(n){return rt(n,e)});return s(t,function(n,t){t=Ze(t);return Mt(t,"contenteditable"),Ae(n,t),t},r)}).getOr(r)):c;return Ae(t,et.fromTag("br")),f(n,c),u=n.element,i=c,un(Br,function(t,e){return kt(u,e).filter(function(n){return x(t,n)}).each(function(n){return Bt(i,e,n)})}),l(n.element,c),c},replace:ur,gap:er}},M="data-mce-selected",zn="data-mce-first-selected",Wn="data-mce-last-selected",Pr={selected:M,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:zn,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:Wn,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},kr=function(i,t,c,l){i.on("BeforeGetContent",function(e){function n(n){e.preventDefault(),Se(n[0]).map(nr).map(function(n){return[Ge(n,"[data-mce-selected]")]}).each(function(n){var t;e.content="text"===e.format?S(n,function(n){return n.dom.innerText}).join(""):(t=i,S(n,function(n){return t.selection.serializer.serialize(n.dom,{})}).join(""))})}!0===e.selection&&Ue(t.get(),y,n,y)}),i.on("BeforeSetContent",function(u){!0===u.selection&&!0===u.paste&&P.from(i.dom.getParent(i.selection.getStart(),"th,td")).each(function(n){var o=et.fromDom(n);Se(o).each(function(t){var n,e,r=b(function(n,t){t=(t||document).createElement("div");return t.innerHTML=n,Sn(et.fromDom(t))}(u.content),function(n){return"meta"!==ft(n)});1===r.length&&(e=r[0],"table"===ft(e))&&(u.preventDefault(),n=et.fromDom(i.getDoc()),n=lr(n),n={element:o,clipboard:r[0],generators:n},c.pasteCells(t,n).each(function(n){i.selection.setRng(n),i.focus(),l.clear(t)}))})})})},Fn=n([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Mr=U({},Fn);function Nr(e,r){function n(n){var t=r(n);if(t<=0||null===t){n=Ft(n,e);return parseFloat(n)||0}return t}function o(e,n){return f(n,function(n,t){t=Ft(e,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?n:n+t},0)}return{set:function(n,t){if(!L(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);n=n.dom;jt(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:o,max:function(n,t,e){e=o(n,e);return e<t?t-e:0}}}function jr(n){return to.get(n)}function _r(n){return to.getOuter(n)}function zr(e){var n=e.grid,t=p(n.columns,a),r=p(n.rows,a);return S(t,function(t){return eo(function(){return R(r,function(n){return Oe.getAt(e,n,t).filter(function(n){return n.column===t}).toArray()})},function(n){return 1===n.colspan},function(){return Oe.getAt(e,0,t)})})}function Wr(e){var n=e.grid,t=p(n.rows,a),r=p(n.columns,a);return S(t,function(t){return eo(function(){return R(r,function(n){return Oe.getAt(e,t,n).filter(function(n){return n.row===t}).fold(l([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return Oe.getAt(e,t,0)})})}function Fr(t,e){if(e<0||e>=t.length-1)return P.none();var n=t[e].fold(function(){var n=function(n){n=H.call(n,0);return n.reverse(),n}(t.slice(0,e));return I(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return P.some({value:n,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return I(n,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return P.some({value:n,delta:1})});return n.bind(function(e){return r.map(function(n){var t=n.delta+e.delta;return Math.abs(n.value-e.value)/t})})}function Lr(n){return uo.get(n)}function Hr(n){return uo.getOuter(n)}function qr(n,t){return void 0!==n?n:void 0!==t?t:0}function Vr(n){var t=(u=n.dom.ownerDocument).body,e=u.defaultView,r=u.documentElement;if(t===n.dom)return co(t.offsetLeft,t.offsetTop);var o=qr(null==e?void 0:e.pageYOffset,r.scrollTop),u=qr(null==e?void 0:e.pageXOffset,r.scrollLeft),e=qr(r.clientTop,t.clientTop),t=qr(r.clientLeft,t.clientLeft);return lo(n).translate(u-t,o-e)}function Ur(n,t){return{row:n,y:t}}function $r(n,t){return{col:n,x:t}}function Gr(n){return Vr(n).left+_r(n)}function Kr(n){return Vr(n).left}function Xr(n,t){return $r(n,Kr(t))}function Yr(n,t){return $r(n,Gr(t))}function Jr(n){return Vr(n).top}function Qr(n,t){return Ur(n,Jr(t))}function Zr(n,t){return Ur(n,Jr(t)+Hr(t))}function no(e,t,r){if(0===r.length)return[];var n=S(r.slice(1),function(n,t){return n.map(function(n){return e(t,n)})}),o=r[r.length-1].map(function(n){return t(r.length-1,n)});return n.concat([o])}var to=Nr("width",function(n){return n.dom.offsetWidth}),eo=function(n,t,e){var r=n();return m(r,t).orThunk(function(){return P.from(r[0]).orThunk(e)}).map(function(n){return n.element})},ro=function(t,e){return function(n){return"rtl"===oo(n)?e:t}},oo=function(n){return"rtl"===Ft(n,"direction")?"rtl":"ltr"},uo=Nr("height",function(n){var t=n.dom;return yt(n)?t.getBoundingClientRect().height:t.offsetHeight}),io=function(e,r){return{left:e,top:r,translate:function(n,t){return io(e+n,r+t)}}},co=io,lo=function(n){var t=n.dom,e=t.ownerDocument.body;return e===t?co(e.offsetLeft,e.offsetTop):yt(n)?function(n){n=n.getBoundingClientRect();return co(n.left,n.top)}(t):co(0,0)},ao={delta:a,positions:function(n){return no(Qr,Zr,n)},edge:Jr},fo=ro({delta:a,edge:Kr,positions:function(n){return no(Xr,Yr,n)}},{delta:function(n){return-n},edge:Gr,positions:function(n){return no(Yr,Xr,n)}}),so={delta:function(n,t){return fo(t).delta(n,t)},positions:function(n,t){return fo(t).positions(n,t)},edge:function(n){return fo(n).edge(n)}},mo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},go=(st=["Infinity",(Ln="[0-9]+")+"\\."+po(Ln)+po(st="[eE][+-]?[0-9]+"),"\\."+Ln+po(st),Ln+po(st)].join("|"),new RegExp("^("+("[+-]?(?:"+st+")")+")(.*)$"));function po(n){return"(?:"+n+")?"}function ho(n,r){return P.from(go.exec(n)).bind(function(n){var t,e=Number(n[1]),n=n[2];return t=n,d(r,function(n){return d(mo[n],function(n){return t===n})})?P.some({value:e,unit:n}):P.none()})}function bo(){var n=nt().browser;return n.isIE()||n.isEdge()}function vo(n,t,e){return function(n,t){n=parseFloat(n);return isNaN(n)?t:n}(Ft(n,t),e)}function wo(n){return bo()?(e=(t=n).dom.getBoundingClientRect().height,"border-box"===Ft(t,"box-sizing")?e:e-vo(t,"padding-top",0)-vo(t,"padding-bottom",0)-(vo(t,"border-top-width",0)+vo(t,"border-bottom-width",0))):vo(n,"height",Lr(n));var t,e}function yo(n){return bo()?(e=(t=n).dom.getBoundingClientRect().width,"border-box"===Ft(t,"box-sizing")?e:e-vo(t,"padding-left",0)-vo(t,"padding-right",0)-(vo(t,"border-left-width",0)+vo(t,"border-right-width",0))):vo(n,"width",jr(n));var t,e}function Co(n,t){var e=P.from(n.dom.offsetParent).map(et.fromDom).getOr(Ct(bn(n)));return t(n)/t(e)*100}function xo(n,t){zt(n,"width",t+"px")}function So(n,t){zt(n,"width",t+"%")}function To(n,t){zt(n,"height",t+"px")}function Ro(n,t,e,r){var o,u,i=parseInt(n,10);return Q(n,"%")&&"table"!==ft(t)?(o=i,u=e,e=r,t=Se(r=t).map(function(n){n=u(n);return Math.floor(o/100*n)}).getOr(o),e(r,t),t):i}function Oo(n){var t,e=Lt(t=n,"height").getOrThunk(function(){return wo(t)+"px"});return e?Ro(e,n,Lr,To):Lr(n)}function Do(n){return Lt(n,"width").fold(function(){return P.from(Pt(n,"width"))},function(n){return P.some(n)})}function Ao(n,t){return n/t.pixelWidth()*100}function Io(t,e){return Do(t).fold(function(){var n=jr(t);return Ao(n,e)},function(n){return function(n,t,e){t=cu.exec(t);if(null!==t)return parseFloat(t[1]);n=yo(n);return Ao(n,e)}(t,n,e)})}function Bo(t,e){return Do(t).fold(function(){return yo(t)},function(n){return function(n,t,e){var r=lu.exec(t);if(null!==r)return parseInt(r[1],10);t=cu.exec(t);return null===t?yo(n):parseFloat(t[1])/100*e.pixelWidth()}(t,n,e)})}function Eo(n){return t="rowspan",Oo(n=n)/Vt(n,t);var t}function Po(n,t,e){zt(n,"width",t+e)}function ko(n){return Co(n,jr)+"%"}function Mo(n,t,e){return Lt(n,t).fold(function(){return e(n)+"px"},function(n){return n})}function No(n,t){return Mo(n,"width",function(n){return su(n)?jr(n):Bo(n,t)})}function jo(n){return Mo(n,"height",Eo)}function _o(n,t,e,r,o,u){return n.filter(r).fold(function(){return u(Fr(e,t))},function(n){return o(n)})}function zo(n,t,r,o,u){var i=zr(n),n=Oe.hasColumns(n)?S(Oe.justColumns(n),function(n){return P.from(n.element)}):i,c=[P.some(so.edge(t))].concat(S(so.positions(i,t),function(n){return n.map(function(n){return n.x})})),l=g(Ut);return S(n,function(n,e){return _o(n,e,c,l,function(n){if(!su(t=n)||Lt(t,"width").isSome())return r(n,u);var t,t=(t=i[e],n=a,null!=t?n(t):P.none());return _o(t,e,c,l,function(n){return o(P.some(jr(n)))},o)},o)})}function Wo(n){return n.map(function(n){return n+"px"}).getOr("")}function Fo(n,t,e){return zo(n,t,Bo,function(n){return n.getOrThunk(e.minCellWidth)},e)}function Lo(n,t,e,r,o){var n=Wr(n),u=[P.some(e.edge(t))].concat(S(e.positions(n,t),function(n){return n.map(function(n){return n.y})}));return S(n,function(n,t){return _o(n,t,u,g($t),r,o)})}function Ho(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r}function qo(n,t){return(Oe.hasColumns(n)?function(n,e){n=Oe.justColumns(n);return S(n,function(n,t){return{element:n.element,width:e[t],colspan:n.colspan}})}:function(n,e){n=Oe.justCells(n);return S(n,function(n){var t=Ho(n.column,n.column+n.colspan,e);return{element:n.element,width:t,colspan:n.colspan}})})(n,t)}function Vo(n,t,e){t=qo(n,t),T(t,function(n){e.setElementWidth(n.element,n.width)})}function Uo(n,t,e,r,o){var u=Oe.fromTable(n),n=o.getCellDelta(t),i=o.getWidths(u,o),t=e===u.grid.columns-1,n=r.clampTableDelta(i,e,n,o.minCellWidth(),t),e=gr(i,e,n,o,r),e=S(e,function(n,t){return n+i[t]});Vo(u,e,o),r.resizeTable(o.adjustTableWidth,n,t)}function $o(n,e,r,t){var o,u=Oe.fromTable(n),i=Lo(u,n,t,Eo,function(n){return n.getOrThunk(Ce)}),t=S(i,function(n,t){return r===t?Math.max(e+n,Ce()):n}),i=function(n,e){n=Oe.justCells(n);return S(n,function(n){var t=Ho(n.row,n.row+n.rowspan,e);return{element:n.element,height:t,rowspan:n.rowspan}})}(u,t),u=(o=t,S(u.all,function(n,t){return{element:n.element,height:o[t]}}));T(u,function(n){To(n.element,n.height)}),T(i,function(n){To(n.element,n.height)}),t=s(t,function(n,t){return n+t},0),To(n,t)}function Go(n){return S(n,l(0))}function Ko(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))}function Xo(){function i(n,e,t,r){var o=(100+t)/100,u=Math.max(r,(n[e]+t)/o);return S(n,function(n,t){return(t===e?u:n/o)-n})}function c(n,t,e,r,o,u){return u?i(n,t,r,o):function(n,t,e,r,o){o=mu(n,t,r,o);return Ko(n,t,e+1,[o,0],Go)}(n,t,e,r,o)}return{resizeTable:function(n,t){return n(t)},clampTableDelta:mu,calcLeftEdgeDeltas:c,calcMiddleDeltas:function(n,t,e,r,o,u,i){return c(n,e,r,o,u,i)},calcRightEdgeDeltas:function(n,t,e,r,o,u){if(u)return i(n,e,r,o);o=mu(n,e,r,o);return Go(n.slice(0,e)).concat([o])}}}function Yo(){function i(n,t,e,r,o){return o=du(n,0<=r?e:t,r,o),Ko(n,t,e+1,[o,-o],Go)}return{resizeTable:function(n,t,e){e&&n(t)},clampTableDelta:function(n,t,e,r,o){if(o){if(0<=e)return e;o=f(n,function(n,t){return n+t-r},0);return Math.max(-o,e)}return mu(n,t,e,r)},calcLeftEdgeDeltas:i,calcMiddleDeltas:function(n,t,e,r,o,u){return i(n,e,r,o,u)},calcRightEdgeDeltas:function(n,t,e,r,o,u){if(u)return Go(n);r/=n.length;return S(n,l(r))}}}function Jo(n,t,e){var r=e.substring(0,e.length-n.length),n=parseFloat(r);return r===n.toString()?t(n):hu.invalid(e)}function Qo(n,r,o){return n.fold(function(){return r},function(n){return e=(t=n)/o,S(r,function(n){return bu.from(n).fold(function(){return n},function(n){return n*e+"px"},function(n){return n/100*t+"px"})});var t,e},function(n){return t=o,S(r,function(n){return bu.from(n).fold(function(){return n},function(n){return n/t*100+"%"},function(n){return n+"%"})});var t})}function Zo(n,t,e){return e=bu.from(e),t=O(n,function(n){return"0px"===n})?function(n,t){n=n.fold(function(){return l("")},function(n){return l(n/t+"px")},function(){return l(100/t+"%")});return p(t,n)}(e,n.length):Qo(e,n,t),vu(t)}function nu(n,t){return 0===n.length?t:s(n,function(n,t){return bu.from(t).fold(l(0),a,a)+n},0)}function tu(n){return wu(n).fold(l("px"),l("px"),l("%"))}function eu(l,n,t,a){var f=Oe.fromTable(l),i=f.all,s=Oe.justCells(f),m=Oe.justColumns(f);n.each(function(n){var e,r,o,u,t=tu(n),i=jr(l),c=zo(f,l,No,Wo,a),i=Zo(c,i,n);Oe.hasColumns(f)?(o=i,u=t,T(m,function(n,t){t=nu([o[t]],ye());zt(n.element,"width",t+u)})):(e=i,r=t,T(s,function(n){var t=e.slice(n.column,n.colspan+n.column),t=nu(t,ye());zt(n.element,"width",t+r)})),zt(l,"width",n)}),t.each(function(n){var e,r,t=tu(n),o=Lr(l),u=Lo(f,l,ao,jo,Wo),o=Zo(u,o,n);e=o,o=i,r=t,T(s,function(n){var t=e.slice(n.row,n.rowspan+n.row),t=nu(t,Ce());zt(n.element,"height",t+r)}),T(o,function(n,t){zt(n.element,"height",e[t])}),zt(l,"height",n)})}function ru(n){return Oe.fromTable(n).grid}function ou(n){return n.slice(0).sort()}function uu(t,n){0<(n=b(n,function(n){return!x(t,n)})).length&&function(n){throw new Error("Unsupported keys for object: "+ou(n).join(", "))}(n)}var iu,cu=/(\d+(\.\d+)?)%/,lu=/(\d+(\.\d+)?)px|em/,au=l(cu),fu=l(lu),su=(iu="col",function(n){return mt(n)&&ft(n)===iu}),ht=function(o){return function(n,t,e,r){if(o(e)){r=Math.max(r,n[t]-Math.abs(e)),t=Math.abs(r-n[t]);return 0<=e?t:-t}return e}},mu=ht(function(n){return n<0}),du=ht(C),gu=function(n,t){var e=P.from(n.dom.documentElement).map(et.fromDom).getOr(n);return{parent:l(e),view:l(n),origin:l(co(0,0)),isResizable:t}},pu=function(n,t,e){return{parent:l(t),view:l(n),origin:l(co(0,0)),isResizable:e}},hu=n([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),bu=U(U({},hu),{from:function(n){return Q(n,"%")?Jo("%",hu.percent,n):Q(n,"px")?Jo("px",hu.pixels,n):hu.invalid(n)}}),vu=function(n){if(0===n.length)return n;var t,e=s(n,function(n,t){var e=bu.from(t).fold(function(){return{value:t,remainder:0}},function(n){return t=n,e="px",{value:(n=Math.floor(t))+e,remainder:t-n};var t,e},function(n){return{value:n+"%",remainder:0}});return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}},{output:[],remainder:0}),n=e.output;return n.slice(0,n.length-1).concat([(n=n[n.length-1],t=Math.round(e.remainder),bu.from(n).fold(l(n),function(n){return n+t+"px"},function(n){return n+t+"%"}))])},wu=bu.from,yu=function(n){return Do(n).exists(function(n){return cu.test(n)})},Cu=function(n){return Do(n).exists(function(n){return lu.test(n)})},xu=function(n){return Do(n).isNone()},Su=ko,Tu=function(t){var o=[];return{bind:function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");o.push(n)},unbind:function(t){o=b(o,function(n){return n!==t})},trigger:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={};T(t,function(n,t){r[n]=e[t]}),T(o,function(n){n(r)})}}},Ru=function(n){return{registry:cn(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:cn(n,function(n){return n.trigger})}},Ou=function(r,o,u){if(0===o.length)throw new Error("You must specify at least one required field.");var e;return function(t,n){if(!_(n))throw new Error("The "+t+" fields must be an array. Was: "+n+".");T(n,function(n){if(!N(n))throw new Error("The value "+n+" in the "+t+" fields was not a string.")})}("required",o),e=ou(o),m(e,function(n,t){return t<e.length-1&&n===e[t+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}),function(t){var e=ut(t);O(o,function(n){return x(e,n)})||function(n,t){throw new Error("All required keys ("+ou(n).join(", ")+") were not specified. Specified keys were: "+ou(t).join(", ")+".")}(o,e),r(o,e);var n=b(o,function(n){return!u.validate(t[n],n)});return 0<n.length&&function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+ou(n).join(", ")+") were not.")}(n,u.label),t}},k=function(n){return Ou(uu,n,{validate:F,label:"function"})},M=k(["compare","extract","mutate","sink"]),Du=k(["element","start","stop","destroy"]),Au=k(["forceDrop","drop","move","delayDrop"]);function Iu(){var o=P.none(),u=Ru({move:Tu(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){var t,e;(t=r,e=n,n=o.map(function(n){return t.compare(n,e)}),o=P.some(e),n).each(function(n){u.trigger.move(n)})})},reset:function(){o=P.none()},events:u.registry}}function Bu(){var n={onEvent:y,reset:y},t=Iu(),e=n;return{on:function(){e.reset(),e=t},off:function(){e.reset(),e=n},isOn:function(){return e===t},onEvent:function(n,t){e.onEvent(n,t)},events:t.events}}function Eu(t,e,n){function r(){m.stop(),a.isOn()&&(a.off(),l.trigger.stop())}var o,u,i,c=!1,l=Ru({start:Tu([]),stop:Tu([])}),a=Bu(),f=(o=r,u=200,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){o.apply(null,n),i=null},u)}});function s(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];c&&e.apply(null,n)}}a.events.move.bind(function(n){e.mutate(t,n.info)});var m=e.sink(Au({forceDrop:r,drop:s(r),move:s(function(n){f.cancel(),a.onEvent(n,e)}),delayDrop:s(f.throttle)}),n);return{element:m.element,go:function(n){m.start(n),a.on(),l.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){m.destroy()},events:l.registry}}function Pu(n){function t(){return n.stopPropagation()}function e(){return n.preventDefault()}var r,o,u=et.fromDom(Dn(n).getOr(n.target)),i=(r=e,o=t,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return r(o.apply(null,n))});return{target:u,x:n.clientX,y:n.clientY,stop:t,prevent:e,kill:i,raw:n}}function ku(n,t,e,r,o){var u,i,r=(u=e,i=r,function(n){u(n)&&i(Pu(n))});return n.dom.addEventListener(t,r,o),{unbind:h(va,n,t,r,o)}}function Mu(n,t,e){return ku(n,t,wa,e,!1)}function Nu(n,t){return void 0===(t=Pt(n,t))||""===t?[]:t.split(" ")}function ju(n){return void 0!==n.dom.classList}function _u(n,t){return function(n,t,e){e=Nu(n,t).concat([e]);return Bt(n,t,e.join(" ")),!0}(n,"class",t)}function zu(n,t){return r=t,0<(n=b(Nu(e=n,t="class"),function(n){return n!==r})).length?Bt(e,t,n.join(" ")):Mt(e,t),0;var e,r}function Wu(n,t){ju(n)?n.dom.classList.add(t):_u(n,t)}function Fu(n){0===(ju(n)?n.dom.classList:Nu(n,"class")).length&&Mt(n,"class")}function Lu(n,t){return ju(n)&&n.dom.classList.contains(t)}function Hu(n){return"true"===Pt(n,"contenteditable")}function qu(){var e,r=Ru({drag:Tu(["xDelta","yDelta","target"])}),o=P.none(),n={mutate:function(n,t){e.trigger.drag(n,t)},events:(e=Ru({drag:Tu(["xDelta","yDelta"])})).registry};return n.events.drag.bind(function(t){o.each(function(n){r.trigger.drag(t.xDelta,t.yDelta,n)})}),{assign:function(n){o=P.some(n)},get:function(){return o},mutate:n.mutate,events:r.registry}}function Vu(n){n=Bn(n.parent(),"."+Sa),T(n,Ie)}function Uu(t,n,e){var r=t.origin();T(n,function(n){n.each(function(n){n=e(r,n);Wu(n,Sa),Ae(t.parent(),n)})})}function $u(n,t,i,c){Uu(n,t,function(n,t){var e,r,o,u,n=(e=t.col,r=t.x-n.left,o=i.top-n.top,u=7,t=c,n=et.fromTag("div"),Wt(n,{position:"absolute",left:r-u/2+"px",top:o+"px",height:t+"px",width:u+"px"}),Et(n,{"data-column":e,role:"presentation"}),n);return Wu(n,Ra),n})}function Gu(n,t,i,c){Uu(n,t,function(n,t){var e,r,o,u,n=(e=t.row,r=i.left-n.left,o=t.y-n.top,u=c,t=7,n=et.fromTag("div"),Wt(n,{position:"absolute",left:r+"px",top:o-t/2+"px",height:t+"px",width:u+"px"}),Et(n,{"data-row":e,role:"presentation"}),n);return Wu(n,Ta),n})}function Ku(n,t,e,r,o){var u,i=Vr(e),c=t.isResizable,l=0<(r=0<r.length?ao.positions(r,e):[]).length?(u=c,R(n.all,function(n,t){return u(n.element)?[t]:[]})):[],r=b(r,function(n,t){return d(l,function(n){return t===n})});Gu(t,r,i,_r(e));var a,f,s,m=0<(o=0<o.length?so.positions(o,e):[]).length?(f=c,s=[],p((a=n).grid.columns,function(n){Oe.getColumnAt(a,n).map(function(n){return n.element}).forall(f)&&s.push(n)}),b(s,function(t){var n=Oe.filterItems(a,function(n){return n.column===t});return O(n,function(n){return f(n.element)})})):[],o=b(o,function(n,t){return d(m,function(n){return t===n})});$u(t,o,i,Hr(e))}function Xu(n,t){var e,r,o;Vu(n),n.isResizable(t)&&(e=Oe.fromTable(t),r=Wr(e),o=zr(e),Ku(e,n,t,r,o))}function Yu(n,t){n=Bn(n.parent(),"."+Sa),T(n,t)}function Ju(n){Yu(n,function(n){zt(n,"display","none")})}function Qu(n){Yu(n,function(n){zt(n,"display","block")})}function Zu(o){function n(n,t){return P.from(Pt(n,t))}var t,e,r=qu(),u=(e=void 0!==(t=void 0===(t={})?{}:t).mode?t.mode:xa,Eu(r,e,t)),i=P.none();function c(n,t){return Gt(n,t)-qt(n,"data-initial-"+t,0)}function l(n,t){d.trigger.startAdjust(),r.assign(n),Bt(n,"data-initial-"+t,Gt(n,t)),Wu(n,Oa),zt(n,"opacity","0.2"),u.go(o.parent())}function a(n){return rt(n,o.view())}function f(n){return At(n,"table",a).filter(function(n){return At(n,"[contenteditable]",a).exists(Hu)})}r.events.drag.bind(function(e){n(e.target,"data-row").each(function(n){var t=Gt(e.target,"top");zt(e.target,"top",t+e.yDelta+"px")}),n(e.target,"data-column").each(function(n){var t=Gt(e.target,"left");zt(e.target,"left",t+e.xDelta+"px")})}),u.events.stop.bind(function(){r.get().each(function(r){i.each(function(e){n(r,"data-row").each(function(n){var t=c(r,"top");Mt(r,"data-initial-top"),d.trigger.adjustHeight(e,t,parseInt(n,10))}),n(r,"data-column").each(function(n){var t=c(r,"left");Mt(r,"data-initial-left"),d.trigger.adjustWidth(e,t,parseInt(n,10))}),Xu(o,e)})})});var s=Mu(o.parent(),"mousedown",function(n){var t;t=n.target,Lu(t,Ta)&&l(n.target,"top"),t=n.target,Lu(t,Ra)&&l(n.target,"left")}),m=Mu(o.view(),"mouseover",function(n){f(n.target).fold(function(){yt(n.target)&&Vu(o)},function(n){i=P.some(n),Xu(o,n)})}),d=Ru({adjustHeight:Tu(["table","delta","row"]),adjustWidth:Tu(["table","delta","column"]),startAdjust:Tu([])});return{destroy:function(){s.unbind(),m.unbind(),u.destroy(),Vu(o)},refresh:function(n){Xu(o,n)},on:u.on,off:u.off,hideBars:h(Ju,o),showBars:h(Qu,o),events:d.registry}}function ni(n,t){return n.fire("newrow",{node:t})}function ti(n,t){return n.fire("newcell",{node:t})}function ei(n,t,e){n.fire("TableModified",U(U({},e),{table:t}))}function ri(n){return n.getParam("table_sizing_mode","auto")}function oi(n){return n.getParam("table_responsive_width")}function ui(n){return n.getParam("table_default_attributes",Ea,"object")}function ii(n){return n.getParam("table_default_styles",function(n){if(Ma(n)){var t=n.getBody().offsetWidth;return U(U({},Ba),{width:t+"px"})}return Na(n)?ln(Ba,function(n,t){return"width"!==t}):Ba}(n),"object")}function ci(n){return n.getParam("table_cell_advtab",!0,"boolean")}function li(n){return n.getParam("table_row_advtab",!0,"boolean")}function ai(n){return n.getParam("table_advtab",!0,"boolean")}function fi(n){return n.getParam("table_style_by_css",!1,"boolean")}function si(n){return"relative"===ri(n)||!0===oi(n)}function mi(n){var t="section",n=n.getParam("table_header_type",t,"string");return x(["section","cells","sectionCells","auto"],n)?n:t}function di(n){var t=n.getParam("table_column_resizing",Pa,"string");return m(["preservetable","resizetable"],function(n){return n===t}).getOr(Pa)}function gi(n){return"preservetable"===di(n)}function pi(n){return n.nodeName.toLowerCase()}function hi(n){return n.getBoundingClientRect().width}function bi(n){return n.getBoundingClientRect().height}function vi(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n}function wi(n){function t(n){return Mt(n,"data-mce-style")}Mt(n,"data-mce-style"),T(Yt(n),t),T(Jt(n),t)}function yi(n,t){return t=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width"),P.from(t).filter(Z)}function Ci(n){return/^(\d+(\.\d+)?)%$/.test(n)}function xi(e){function n(){return jr(e)}var t=l(0);return{width:n,pixelWidth:n,getWidths:function(n,t){return Fo(n,e,t)},getCellDelta:t,singleColumnWidth:l([0]),minCellWidth:t,setElementWidth:y,adjustTableWidth:y,isRelative:!0,label:"none"}}function Si(n,r){var e=Fa(parseFloat(n)),o=Fa(jr(r));return{width:e.get,pixelWidth:o.get,getWidths:function(n,t){return zo(n,r,Io,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})},e=t);var e},getCellDelta:function(n){return n/o.get()*100},singleColumnWidth:function(n,t){return[100-n]},minCellWidth:function(){return ye()/o.get()*100},setElementWidth:So,adjustTableWidth:function(n){var t=e.get(),t=t+n/100*t;So(r,t),e.set(t),o.set(jr(r))},isRelative:!0,label:"percent"}}function Ti(n,e){var t=Fa(n),r=t.get;return{width:r,pixelWidth:r,getWidths:function(n,t){return Fo(n,e,t)},getCellDelta:a,singleColumnWidth:function(n,t){return[Math.max(ye(),n+t)-n]},minCellWidth:ye,setElementWidth:xo,adjustTableWidth:function(n){n=r()+n;xo(e,n),t.set(n)},isRelative:!1,label:"pixel"}}function Ri(n,t){if(si(n)){var e=yi(n,t.dom).filter(Ci).getOrThunk(function(){return Su(t)});return qa(e,t)}return Ma(n)?Ha(jr(t),t):La(t)}function Oi(n){Mt(n,"width")}function Di(n,t){var e=jr(n)+"px";eu(n,P.some(e),P.none(),t),Oi(n)}function Ai(n,t){var e=Ri(n,t);n=e,t=ko(e=t),eu(e,P.some(t),P.none(),n),Oi(e)}function Ii(n,t){n=Ri(n,t),Di(t,n)}function Bi(){var n=et.fromTag("div");return Wt(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ae(Ct(et.fromDom(document)),n),n}function Ei(n){return"false"!==Pt(n,"data-mce-resize")}function Pi(n,t){return{element:n,offset:t}}function ki(n,t){return(n.property().isText(t)?n.property().getText(t):n.property().children(t)).length}function Mi(e,r){Do(e).bind(function(n){return ho(n,["fixed","relative","empty"])}).each(function(n){var t=n.value/2;Po(e,t,n.unit),Po(r,t,n.unit)})}function Ni(n,t,e){n.cells[t]=e}function ji(n,t){var e=n.cells,t=S(e,t);return gn(t,n.section)}function _i(n,t){return n.cells[t]}function zi(n,t){return _i(n,t).element}function Wi(n){return n.cells.length}function Fi(n){return{rows:(n=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(t(i,o)?e:r).push(i)}return{pass:e,fail:r}}(n,function(n){return"colgroup"===n.section})).fail,cols:n.pass}}function Li(n,t,e,r){e===r?Mt(n,t):Bt(n,t,e)}function Hi(n,t,e){A(In(n,t)).fold(function(){return de(n,e)},function(n){return me(n,e)})}function qi(u,n){function i(n){return S(n,function(n){n.isNew&&r.push(n.element);var t=n.element;return be(t),T(n.cells,function(n){n.isNew&&o.push(n.element),Li(n.element,"colspan",n.colspan,1),Li(n.element,"rowspan",n.rowspan,1),Ae(t,n.element)}),t})}function c(n){return R(n,function(n){return S(n.cells,function(n){return Li(n.element,"span",n.colspan,1),n.element})})}function e(n,t){var e,r,o=(o=Ot(e=u,r=t).getOrThunk(function(){var n=et.fromTag(r,bn(e).dom);return"thead"===r?Hi(e,"caption,colgroup",n):"colgroup"===r?Hi(e,"caption",n):Ae(e,n),n}),be(o),o),n=("colgroup"===t?c:i)(n);he(o,n)}function t(n,t){0<n.length?e(n,t):Ot(u,t).each(Ie)}var r=[],o=[],l=[],a=[],f=[],s=[];return T(n,function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":a.push(n);break;case"tfoot":f.push(n);break;case"colgroup":s.push(n)}}),t(s,"colgroup"),t(l,"thead"),t(a,"tbody"),t(f,"tfoot"),{newRows:r,newCells:o}}function Vi(n,t){if(0===n.length)return 0;var e=n[0];return v(n,function(n){return!t(e.element,n.element)}).fold(function(){return n.length},function(n){return n})}function Ui(n,t,e,r){var o,u=n[t].cells.slice(e),u=Vi(u,r),t=(o=e,S(n,function(n){return _i(n,o)}).slice(t));return{colspan:u,rowspan:Vi(t,r)}}function $i(o,u){var i=S(o,function(n){return S(n.cells,c)});return S(o,function(n,r){return{details:R(n.cells,function(n,t){if(!1!==i[r][t])return[];var e=Ui(o,r,t,u);return function(n,t,e,r){for(var o=n;o<n+e;o++)for(var u=t;u<t+r;u++)i[o][u]=!0}(r,t,e.rowspan,e.colspan),[{element:n.element,rowspan:e.rowspan,colspan:e.colspan,isNew:n.isNew}]}),section:n.section}})}function Gi(n,t,e){var r,o=[];Oe.hasColumns(n)&&(r=S(Oe.justColumns(n),function(n){return dn(n.element,e)}),o.push(gn(r,"colgroup")));for(var u=0;u<n.grid.rows;u++){for(var i=[],c=0;c<n.grid.columns;c++){var l=Oe.getAt(n,u,c).map(function(n){return dn(n.element,e)}).getOrThunk(function(){return dn(t.gap(),!0)});i.push(l)}var a=gn(i,n.all[u].section);o.push(a)}return o}function Ki(n,e){return S(n,function(n){var t,t=(t=n.details,I(t,function(n){return wn(n.element).map(function(n){var t=wn(n).isNone();return dn(n,t)})}).getOrThunk(function(){return dn(e.row(),!0)}));return{element:t.element,cells:n.details,section:n.section,isNew:t.isNew}})}function Xi(n,t){return n=$i(n,rt),Ki(n,t)}function Yi(n,t){return I(n.all,function(n){return m(n.cells,function(n){return rt(t,n.element)})})}function Ji(t,n){return n=S(n.selection,function(n){return Xt(n).bind(function(n){return Yi(t,n)})}),0<(n=pr(n)).length?P.some(n):P.none()}function Qi(n,t,e,r){for(var o=Fi(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Wi(o[0]);c++){var l=e(zi(o[i],c),t);!0===l&&!1===u?Ni(o[i],c,dn(r(),!0)):!0===l&&(u=!1)}return n}function Zi(n,e,u,i){var t,r,c=Fi(n).rows;return 0<e&&e<c.length&&(t=c[e-1].cells,r=u,t=f(t,function(n,t){return d(n,function(n){return r(n.element,t.element)})?n:n.concat([t])},[]),T(t,function(r){for(var o=P.none(),n=function(e){for(var n=0;n<Wi(c[0]);n++)!function(t){var n=c[e].cells[t];u(n.element,r.element)&&(o=o.isNone()?P.some(i()):o).each(function(n){Ni(c[e],t,dn(n,!0))})}(n)},t=e;t<c.length;t++)n(t)})),n}function nc(n,t){return{rowDelta:0,colDelta:Wi(n[0])-Wi(t[0])}}function tc(n,t){return{rowDelta:n.length-t.length,colDelta:0}}function ec(n,t,e){var r="colgroup"===t.section?e.col:e.cell;return S(n,function(){return dn(r(),!0)})}function rc(t,n,e){return t.concat(p(n,function(){var n=t[t.length-1];return Ja(n,ec(n.cells,n,e))}))}function oc(n,e,r){return S(n,function(n){var t=ec(p(e,a),n,r);return Ja(n,n.cells.concat(t))})}function uc(n,t,e){var r=t.colDelta<0?oc:a;return(t.rowDelta<0?rc:a)(r(n,Math.abs(t.colDelta),e),Math.abs(t.rowDelta),e)}function ic(n,t,e,r,o){for(var u,i,c,l,a=n.row,f=n.column,s=a+e.length,m=f+Wi(e[0]),d=a;d<s;d++)for(var g=f;g<m;g++){p=g,l=void 0,l=h(c=o,_i((u=t)[i=d],p).element),c=u[i],1<u.length&&1<Wi(c)&&(0<p&&l(zi(c,p-1))||p<c.cells.length-1&&l(zi(c,p+1))||0<i&&l(zi(u[i-1],p))||i<u.length-1&&l(zi(u[i+1],p)))&&Qi(t,zi(t[d],g),o,r.cell);var p=zi(e[d-a],g-f),p=r.replace(p);Ni(t[d],g,dn(p,!0))}return t}function cc(t,e,r,o,u){return function(n,t,e){if(n.row>=t.length||n.column>Wi(t[0]))return nf.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),t=r[0].cells.slice(n.column),n=Wi(e[0]),e=e.length;return nf.value({rowDelta:r.length-e,colDelta:t.length-n})}(t,e,r).map(function(n){n=uc(e,n,o);return ic(t,n,r,o,u)})}function lc(e,n,t,r,o){var u,i,c;l=n,u=e,i=o,c=r.cell,0<u&&u<l[0].cells.length&&T(l,function(n){var t=n.cells[u-1],e=n.cells[u];i(e.element,t.element)&&Ni(n,u,dn(c(),!0))});var l=tc(t,n),a=uc(t,l,r),l=tc(n,a),r=uc(n,l,r);return S(r,function(n,t){t=n.cells.slice(0,e).concat(a[t].cells).concat(n.cells.slice(e,n.cells.length));return Ja(n,t)})}function ac(n,t,e,r,o){return Zi(t,n,o,r.cell),o=nc(e,t),e=uc(e,o,r),o=nc(t,e),o=uc(t,o,r),r=Fi(o),o=r.cols,r=r.rows,o.concat(r.slice(0,n)).concat(e).concat(r.slice(n,r.length))}function fc(n,e,t,r,o){var u=(c=Fi(n)).rows,i=c.cols,n=u.slice(0,e),c=u.slice(e),t=ji(u[t],function(n,t){return 0<e&&e<u.length&&r(zi(u[e-1],t),zi(u[e],t))?_i(u[e],t):dn(o(n.element,r),!0)});return i.concat(n).concat([t]).concat(c)}function sc(n,l,a,f,s){return S(n,function(n){var t,e,r,o,u,i,c=0<l&&l<Wi(n)&&f(zi(n,l-1),zi(n,l)),c=(t=l,e=(u=n).section,r=c,i=a,o=f,c=s,"colgroup"!==e&&r?_i(u,t):dn(c(zi(u,i),o),!0));return u=l,i=c,c=(o=n).cells,n=c.slice(0,u),u=c.slice(u),u=n.concat([i]).concat(u),Ja(o,u)})}function mc(n,e,r,o){return S(n,function(n){return ji(n,function(n){return t=n,d(e,function(n){return r(t.element,n.element)})?dn(o(n.element,r),!0):n;var t})})}function dc(n,t,e,r){return void 0!==zi(n[t],e)&&0<t&&r(zi(n[t-1],e),zi(n[t],e))}function gc(n,t,e){return 0<t&&e(zi(n,t-1),zi(n,t))}function pc(e,r,o,n){var t=R(e,function(n,t){return dc(e,t,r,o)||gc(n,r,o)?[]:[_i(n,r)]});return mc(e,t,o,n)}function hc(n,e,r,t){var o=Fi(n).rows,u=o[e],i=R(u.cells,function(n,t){return dc(o,e,t,r)||gc(u,t,r)?[]:[n]});return mc(n,i,r,t)}function bc(n){return{element:n,colspan:qt(n,"colspan",1),rowspan:qt(n,"rowspan",1)}}function vc(n){return function(n,t){t=n.property().name(t);return x(ef,t)}(rf,n)}function wc(n){return function(n,t){t=n.property().name(t);return x(["ol","ul"],t)}(rf,n)}function yc(n){return n=n,x(["br","img","hr","input"],rf.property().name(n))}function Cc(n){function u(n){return"br"===ft(n)}function e(o){return Je(o).bind(function(e){var r=xn(e).map(function(n){return!!vc(n)||!!yc(n)&&"img"!==ft(n)}).getOr(!1);return wn(e).map(function(n){return!0===r||("li"===ft(t=n)||Tt(t,wc).isSome())||u(e)||vc(n)&&!rt(o,n)?[]:[et.fromTag("br")];var t})}).getOr([])}var t=0===(t=R(n,function(n){var t=Sn(n);return O(t,function(n){return u(n)||dt(n)&&0===Be(n).trim().length})?[]:t.concat(e(n))})).length?[et.fromTag("br")]:t;be(n[0]),he(n[0],t)}function xc(n,t){return{grid:n,cursor:t}}function Sc(n,t,e){var r=Fi(n).rows;return of(r,t,e).orThunk(function(){return of(r,0,0)})}function Tc(n,t,e){var r=Fi(n).rows;return xc(n,of(r,t,e))}function Rc(n){return f(n,function(n,t){return d(n,function(n){return n.row===t.row})?n:n.concat([t])},[]).sort(function(n,t){return n.row-t.row})}function Oc(n){return f(n,function(n,t){return d(n,function(n){return n.column===t.column})?n:n.concat([t])},[]).sort(function(n,t){return n.column-t.column})}function Dc(n,t,e){var r,n=(r=e.section,Zt(n,function(){return r})),n=Oe.generate(n);return Gi(n,t,!0)}function Ac(n,t){var o=Oe.fromTable(n);return Ji(o,t).bind(function(n){var t=n[n.length-1],e=n[0].column,r=t.column+t.colspan,t=w(S(o.all,function(n){return b(n.cells,function(n){return n.column>=e&&n.column<r})}));return uf(t,function(n){return"th"===ft(n.element)})}).getOr("")}function Ic(n){return pi(n.parentNode)}function Bc(n,t){var e="thead"===Ic(t),t=!d(t.cells,function(n){return"th"!==pi(n)});return e||t?P.some({thead:e,ths:t}):P.none()}function Ec(n,t){return"thead"===(e=Bc(0,t).fold(function(){return Ic(t)},function(n){return"thead"}))?"header":"tfoot"===e?"footer":"body";var e}function Pc(t,n,e){var r,o,u=t.getParent(n,"table"),i=n.parentNode,c=pi(i);e!==c&&((r=t.select(e,u)[0])||(r=t.create(e),o=u.firstChild,"thead"===e?A(In(et.fromDom(u),"caption,colgroup")).fold(function(){return u.insertBefore(r,o)},function(n){return t.insertAfter(r,n.dom)}):u.appendChild(r)),"tbody"===e&&"thead"===c&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),i.hasChildNodes()||t.remove(i))}function kc(n,t,e,r){var o=n.dom,e=function(n,t,e){if(i(e)&&pi(t)!==e){e=n.dom.rename(t,e);return ti(n,e),e}return t}(n,t,e);return W(r)||o.setAttrib(e,"scope",r),e}function Mc(t,n,e,r){return T(n,function(n){return kc(t,n,e,r)}),0}function Nc(n,t,e){var r,o,u=n.dom;"header"===e?(r="auto"===(r=mi(n))?(o=Se(et.fromDom(t.cells[0])).map(Qt).getOr([]),I(o,function(n){return Bc(0,n.dom)}).map(function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"}).getOr("section")):r,Mc(n,t.cells,"section"===r?"td":"th","col"),Pc(u,t,"cells"===r?"tbody":"thead")):(Mc(n,t.cells,"td",null),Pc(u,t,"footer"===e?"tfoot":"tbody"))}function jc(n,t){return xf(n).map(function(n){return fr(t)}).getOr([])}function _c(n,e){var t,r=(t=xf(n)).bind(function(n){return Se(n)}).map(Qt);return n=r,r=function(t,n){return b(n,function(n){return d(ar(n.dom.cells),function(n){return"1"===Pt(n,e)||rt(n,t)})})},((t=t).isSome()&&n.isSome()?P.some(r(t.getOrDie(),n.getOrDie())):P.none()).getOr([])}function zc(n,t,e,r){for(var o=et.fromTag("tr"),u=0;u<n;u++){var i=r<t||u<e?et.fromTag("th"):et.fromTag("td");u<e&&Bt(i,"scope","row"),r<t&&Bt(i,"scope","col"),Ae(i,et.fromTag("br")),Ae(o,i)}return o}function Wc(n){var t=et.fromTag("colgroup");return p(n,function(){return Ae(t,et.fromTag("col"))}),t}function Fc(n,t,e,r){return p(n,function(n){return zc(t,e,r,n)})}function Lc(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)}function Hc(r,e,o,u,i){var c=ii(r),l={styles:c,attributes:ui(r),colGroups:r.getParam("table_use_colgroups",!1,"boolean")};return r.undoManager.ignore(function(){var n=function(n,t,e,r,o,u){void 0===u&&(u=Rf);var i=et.fromTag("table"),c="cells"!==o;Wt(i,u.styles),Et(i,u.attributes),u.colGroups&&Ae(i,Wc(t));var l=Math.min(n,e);c&&0<e&&(u=et.fromTag("thead"),Ae(i,u),a=Fc(e,t,"sectionCells"===o?l:0,r),he(u,a));var a=et.fromTag("tbody");Ae(i,a);r=Fc(c?n-l:n,t,c?0:e,r);return he(a,r),i}(o,e,i,u,mi(r),l);Bt(n,"data-mce-id","__mce");var t,n=(t=n,n=et.fromTag("div"),t=et.fromDom(t.dom.cloneNode(!0)),Ae(n,t),n.dom.innerHTML);r.insertContent(n),r.addVisual()}),Dt(_a(r),'table[data-mce-id="__mce"]').map(function(n){var t,e;return Ma(r)?Ii(r,n):Na(r)?Va(n):(si(r)||(e=c.width,N(e)&&-1!==e.indexOf("%")))&&Ai(r,n),wi(n),Mt(n,"data-mce-id"),t=r,T(Bn(n,"tr"),function(n){ni(t,n.dom),T(Bn(n,"th,td"),function(n){ti(t,n.dom)})}),e=r,Dt(n,"td,th").each(h(Lc,e)),n.dom}).getOr(null)}function qc(n,t,e,r,o){void 0===r&&(r={});var u=function(n){return L(n)&&0<n};if(u(t)&&u(e)){u=r.headerRows||0,r=r.headerColumns||0;return Hc(n,e,t,r,u)}return console.error(o),null}function Vc(n){return function(){return n().fold(function(){return[]},function(n){return S(n,function(n){return n.dom})})}}function Uc(t){return function(n){n=0<n.length?P.some(ar(n)):P.none();t(n)}}function $c(n,t,e){var r=qt(n,t,1);1===e||r<=1?Mt(n,t):Bt(n,t,Math.min(e,r))}function Gc(n,t){var o=Oe.fromTable(n);return Ji(o,t).map(function(n){var e,r,t=n[n.length-1],n=n[0].column,t=t.column+t.colspan;return $(function(n,t,e){if(Oe.hasColumns(n)){var r=b(Oe.justColumns(n),function(n){return n.column>=t&&n.column<e}),n=S(r,function(n){n=nr(n.element);return $c(n,"span",e-t),n}),r=et.fromTag("colgroup");return he(r,n),[r]}return[]}(o,n,t),(e=n,r=t,S(o.all,function(n){var t=b(n.cells,function(n){return n.column>=e&&n.column<r}),n=S(t,function(n){n=nr(n.element);return $c(n,"colspan",r-e),n}),t=et.fromTag("tr");return he(t,n),t})))})}function Kc(n,t,e){var r=Oe.fromTable(n);return Ji(r,t).map(function(n){var t=Gi(r,e,!1),n=Fi(t).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),n=Xi(n,e);return S(n,function(n){var e=Ze(n.element);return T(n.cells,function(n){var t=nr(n.element);Li(t,"colspan",n.colspan,1),Li(t,"rowspan",n.rowspan,1),Ae(e,t)}),e})})}function Xc(o,n,u){return function(n,t){for(var e=0;e<t.length;e++){var r=o.getStyle(t[e],u);if((n=void 0===n?r:n)!==r)return""}return n}(void 0,o.select("td,th",n))}function Yc(n,t,e){e&&n.formatter.apply("align"+e,{},t)}function Jc(t,e){Df.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})}function Qc(n){return lt(t=n,n="menu")&&void 0!==t[n]&&null!==t[n];var t}function Zc(t){return function(n){return J(n,"rgb")?t.toHex(n):n}}function nl(n,t){return t=et.fromDom(t),{borderwidth:Lt(t,"border-width").getOr(""),borderstyle:Lt(t,"border-style").getOr(""),bordercolor:Lt(t,"border-color").map(Zc(n)).getOr(""),backgroundcolor:Lt(t,"background-color").map(Zc(n)).getOr("")}}function tl(n){var o=n[0],n=n.slice(1);return T(n,function(n){T(ut(o),function(r){un(n,function(n,t){var e=o[r];""!==e&&r===t&&e!==n&&(o[r]="")})})}),o}function el(n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}}function rl(n){return Ef.concat(function(n){n=Af(n.getParam("table_cell_class_list",[],"array"));return 0<n.length?P.some({name:"class",type:"listbox",label:"Class",items:n}):P.none()}(n).toArray())}function ol(e){return Se(e[0]).map(function(n){var t=Oe.fromTable(n),n=Oe.justCells(t),n=b(n,function(t){return d(e,function(n){return rt(t.element,n)})});return S(n,function(n){return{element:n.element.dom,column:Oe.getColumnAt(t,n.column).map(function(n){return n.element.dom})}})})}function ul(a,n,f){var t,s=1===n.length;1<=n.length&&(t=Se(n[0]),ol(n).each(function(n){T(n,function(n){var t,e,r,o,u,i=kc(a,n.element,f.celltype),c=s?Pf.normal(a,i):Pf.ifTruthy(a,i),l=n.column.map(function(n){return s?Pf.normal(a,n):Pf.ifTruthy(a,n)}).getOr(c);t=l,n=f,(l=c).setAttrib("scope",n.scope),l.setAttrib("class",n.class),l.setStyle("height",vi(n.height)),t.setStyle("width",vi(n.width)),ci(a)&&(u=f,(o=c).setFormat("tablecellbackgroundcolor",u.backgroundcolor),o.setFormat("tablecellbordercolor",u.bordercolor),o.setFormat("tablecellborderstyle",u.borderstyle),o.setFormat("tablecellborderwidth",vi(u.borderwidth))),s&&(Jc(a,i),e=a,r=i,Df.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},r)})),f.halign&&Yc(a,i,f.halign),f.valign&&(o=a,u=i,(i=f.valign)&&o.formatter.apply("valign"+i,{},u))})}),t.each(function(n){return ei(a,n.dom)}))}function il(n,t,e){var r=e.getData();e.close(),n.undoManager.transact(function(){ul(n,t,r),n.focus()})}function cl(i,n){return n=ol(n).map(function(n){return S(n,function(n){return t=i,e=n.element,r=ci(i),o=n.column,u=t.dom,n=o.getOr(e),U({width:(o=function(n,t){return u.getStyle(n,t)||u.getAttrib(n,t)})(n,"width"),height:o(e,"height"),scope:u.getAttrib(e,"scope"),celltype:pi(e),class:u.getAttrib(e,"class",""),halign:If(t,e),valign:Bf(t,e)},r?nl(u,e):{});var t,e,r,o,u})}),tl(n.getOrDie())}function ll(n,t){var e,r,o=jc(Wa(n),t);0!==o.length&&(e=cl(n,o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:rl(n)},el("cell")]},t={type:"panel",items:[{type:"grid",columns:2,items:rl(n)}]},n.windowManager.open({title:"Cell Properties",size:"normal",body:ci(n)?r:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:h(il,n,o)}))}function al(n){return kf.concat(function(n){n=Af(n.getParam("table_row_class_list",[],"array"));return 0<n.length?P.some({name:"class",type:"listbox",label:"Class",items:n}):P.none()}(n).toArray())}function fl(o,n,u,i){var c=1===n.length;T(n,function(n){i.type!==pi(n.parentNode)&&Nc(o,n,i.type);var t,e,r=c?Pf.normal(o,n):Pf.ifTruthy(o,n);e=i,(t=r).setAttrib("scope",e.scope),t.setAttrib("class",e.class),t.setStyle("height",vi(e.height)),li(o)&&(e=i,(r=r).setStyle("background-color",e.backgroundcolor),r.setStyle("border-color",e.bordercolor),r.setStyle("border-style",e.borderstyle)),i.align!==u.align&&(Jc(o,n),Yc(o,n,i.align))}),Se(et.fromDom(n[0])).each(function(n){return ei(o,n.dom)})}function sl(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact(function(){fl(n,t,e,o),n.focus()})}function ml(o){var n,t,e,r=_c(Wa(o),Pr.selected);0!==r.length&&(e=S(r,function(n){return t=o,e=n.dom,r=li(o),n=t.dom,U({height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class",""),type:Ec(0,e),align:If(t,e)},r?nl(n,e):{});var t,e,r}),n=tl(e),t={type:"tabpanel",tabs:[{title:"General",name:"general",items:al(o)},el("row")]},e={type:"panel",items:[{type:"grid",columns:2,items:al(o)}]},o.windowManager.open({title:"Row Properties",size:"normal",body:li(o)?t:e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:h(sl,o,S(r,function(n){return n.dom}),n)}))}function dl(e,r,n){var o,u=e.dom,i=n.getData();n.close(),""===i.class&&delete i.class,e.undoManager.transact(function(){var n,t;r||(n=parseInt(i.cols,10)||1,t=parseInt(i.rows,10)||1,r=Hc(e,n,t,0,0)),function(n,t,e){var r,o=n.dom,u={},i={};if(u.class=e.class,i.height=vi(e.height),o.getAttrib(t,"width")&&!fi(n)?u.width=(r=e.width)?r.replace(/px$/,""):"":i.width=vi(e.width),fi(n)?(i["border-width"]=vi(e.border),i["border-spacing"]=vi(e.cellspacing)):(u.border=e.border,u.cellpadding=e.cellpadding,u.cellspacing=e.cellspacing),fi(n)&&t.children)for(var c=0;c<t.children.length;c++)Nf(o,t.children[c],{"border-width":vi(e.border),padding:vi(e.cellpadding)}),ai(n)&&Nf(o,t.children[c],{"border-color":e.bordercolor});ai(n)&&(i["background-color"]=e.backgroundcolor,i["border-color"]=e.bordercolor,i["border-style"]=e.borderstyle),u.style=o.serializeStyle(U(U({},ii(n)),i)),o.setAttribs(t,U(U({},ui(n)),u)),ei(n,t)}(e,r,i),(o=u.select("caption",r)[0])&&!i.caption&&u.remove(o),!o&&i.caption&&((o=u.create("caption")).innerHTML=Mf.ie?"Â ":'<br data-mce-bogus="1"/>',r.insertBefore(o,r.firstChild)),""===i.align?Jc(e,r):Yc(e,r,i.align),e.focus(),e.addVisual()})}function gl(n,t){var e,r,o,u,i,c=n.dom,l=(i=ai(l=n),o=ii(l),f=ui(l),i=i?(u=l.dom,{borderstyle:fn(o,"border-style").getOr(""),bordercolor:Zc(u)(fn(o,"border-color").getOr("")),backgroundcolor:Zc(u)(fn(o,"background-color").getOr(""))}):{},U(U(U(U(U(U({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),o),f),i),(r=o["border-width"],fi(l)&&r?{border:r}:fn(f,"border").fold(function(){return{}},function(n){return{border:n}}))),(u=fn(o,"border-spacing").or(fn(f,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),i=fn(o,"border-padding").or(fn(f,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),U(U({},u),i))));!1===t?(e=c.getParent(n.selection.getStart(),"table"))?(a=e,o=ai(r=n),f=r.dom,l=U({width:f.getStyle(a,"width")||f.getAttrib(a,"width"),height:f.getStyle(a,"height")||f.getAttrib(a,"height"),cellspacing:f.getStyle(a,"border-spacing")||f.getAttrib(a,"cellspacing"),cellpadding:f.getAttrib(a,"cellpadding")||Xc(r.dom,a,"padding"),border:(u=f,i=a,c=Lt(et.fromDom(i),"border-width"),fi(r)&&c.isSome()?c.getOr(""):u.getAttrib(i,"border")||Xc(r.dom,i,"border-width")||Xc(r.dom,i,"border")),caption:!!f.select("caption",a)[0],class:f.getAttrib(a,"class",""),align:If(r,a)},o?nl(f,a):{})):ai(n)&&(l.borderstyle="",l.bordercolor="",l.backgroundcolor=""):(l.cols="1",l.rows="1",ai(n)&&(l.borderstyle="",l.bordercolor="",l.backgroundcolor=""));var a=Af(n.getParam("table_class_list",[],"array"));0<a.length&&l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,""));var f={type:"grid",columns:2,items:function(n,t,e){e=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],n=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],t=0<t.length?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return e.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(n).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(t)}(n,a,t)},t=ai(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[f]},el("table")]}:{type:"panel",items:[f]};n.windowManager.open({title:"Table Properties",size:"normal",body:t,onSubmit:h(dl,n,e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l})}function pl(n){return Sf(Wa(n))}function hl(n){return xf(Wa(n))}function bl(e,n){return Se(e,n).bind(function(n){var t=Yt(n);return v(t,function(n){return rt(e,n)}).map(function(n){return{index:n,all:t}})})}function vl(n,t,e){var r,o,n=n.document.createRange();return r=n,t.fold(function(n){r.setStartBefore(n.dom)},function(n,t){r.setStart(n.dom,t)},function(n){r.setStartAfter(n.dom)}),o=n,e.fold(function(n){o.setEndBefore(n.dom)},function(n,t){o.setEnd(n.dom,t)},function(n){o.setEndAfter(n.dom)}),n}function wl(n,t,e,r,o){return(n=n.document.createRange()).setStart(t.dom,e),n.setEnd(r.dom,o),n}function yl(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function Cl(n,t,e){return t(et.fromDom(e.startContainer),e.startOffset,et.fromDom(e.endContainer),e.endOffset)}function xl(n,t){var o,e,t=(o=n,t.match({domRange:function(n){return{ltr:l(n),rtl:P.none}},relative:function(n,t){return{ltr:G(function(){return vl(o,n,t)}),rtl:G(function(){return P.some(vl(o,t,n))})}},exact:function(n,t,e,r){return{ltr:G(function(){return wl(o,n,t,e,r)}),rtl:G(function(){return P.some(wl(o,e,r,n,t))})}}}));return(e=(t=t).ltr()).collapsed?t.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return Kf.rtl(et.fromDom(n.endContainer),n.endOffset,et.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return Cl(0,Kf.ltr,e)}):Cl(0,Kf.ltr,e)}function Sl(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}function Tl(e,r,n,t,o){function u(n){var t=e.dom.createRange();return t.setStart(r.dom,n),t.collapse(!0),t}var i=Be(r).length,i=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),l=Math.abs(t-c.left);if(e<=c.bottom){if(e<c.top||u<l)return i-1;u=l}}return 0}(function(n){return u(n).getBoundingClientRect()},n,t,o.right,i);return u(i)}function Rl(n,t){return t-n.left<n.right-t}function Ol(n,t,e){return(n=n.dom.createRange()).selectNode(t.dom),n.collapse(e),n}function Dl(t,n,e){(r=t.dom.createRange()).selectNode(n.dom);var r=r.getBoundingClientRect(),o=Rl(r,e);return(!0===o?Ye:Je)(n).map(function(n){return Ol(t,n,o)})}function Al(n,t,e){var r=t.dom.getBoundingClientRect(),e=Rl(r,e);return P.some(Ol(n,t,e))}function Il(n,t,e,r){var o=n.dom.createRange();return o.selectNode(t.dom),o=o.getBoundingClientRect(),function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);o=o.getBoundingClientRect(),e=Math.max(o.left,Math.min(o.right,e)),r=Math.max(o.top,Math.min(o.bottom,r));return Yf(n,t,e,r)}(n,t,Math.max(o.left,Math.min(o.right,e)),Math.max(o.top,Math.min(o.bottom,r)))}function Bl(n,t){var e=ft(n);return"input"===e?Vf.after(n):x(["br","img"],e)?0===t?Vf.before(n):Vf.after(n):Vf.on(n,t)}function El(n,t){return n=n.fold(Vf.before,Bl,Vf.after),t=t.fold(Vf.before,Bl,Vf.after),$f.relative(n,t)}function Pl(n,t,e,r){return t=Bl(n,t),r=Bl(e,r),$f.relative(t,r)}function kl(n,t,e,r){var o,u,i,c,l=(u=t,i=e,c=r,(l=bn(o=n).dom.createRange()).setStart(o.dom,u),l.setEnd(i.dom,c),l),r=rt(n,e)&&t===r;return l.collapsed&&!r}function Ml(n){return P.from(n.getSelection())}function Nl(n,t){Ml(n).each(function(n){n.removeAllRanges(),n.addRange(t)})}function jl(n,t,e,r,o){o=wl(n,t,e,r,o),Nl(n,o)}function _l(l,n){return xl(l,n).match({ltr:function(n,t,e,r){jl(l,n,t,e,r)},rtl:function(o,u,i,c){Ml(l).each(function(n){if(n.setBaseAndExtent)n.setBaseAndExtent(o.dom,u,i.dom,c);else if(n.extend)try{e=i,r=c,(t=n).collapse(o.dom,u),t.extend(e.dom,r)}catch(n){jl(l,i,c,o,u)}else jl(l,i,c,o,u);var t,e,r})}})}function zl(n,t,e,r,o){o=Pl(t,e,r,o),_l(n,o)}function Wl(n,t,e){e=El(t,e),_l(n,e)}function Fl(n){function t(n,t,e,r){return wl(o,n,t,e,r)}var o=$f.getWin(n).dom,n=n.match({domRange:function(n){var t=et.fromDom(n.startContainer),e=et.fromDom(n.endContainer);return Pl(t,n.startOffset,e,n.endOffset)},relative:El,exact:Pl});return xl(o,n).match({ltr:t,rtl:t})}function Ll(n){if(0<n.rangeCount){var t=n.getRangeAt(0),n=n.getRangeAt(n.rangeCount-1);return P.some(qf(et.fromDom(t.startContainer),t.startOffset,et.fromDom(n.endContainer),n.endOffset))}return P.none()}function Hl(n){if(null===n.anchorNode||null===n.focusNode)return Ll(n);var t=et.fromDom(n.anchorNode),e=et.fromDom(n.focusNode);return kl(t,n.anchorOffset,e,n.focusOffset)?P.some(qf(t,n.anchorOffset,e,n.focusOffset)):Ll(n)}function ql(n,t){t=function(n,t){n=n.document.createRange();return Gf(n,t),n}(n,t),Nl(n,t)}function Vl(n){return Ml(n).filter(function(n){return 0<n.rangeCount}).bind(Hl).map(function(n){return $f.exact(n.start,n.soffset,n.finish,n.foffset)})}function Ul(n,t){return n=Xf(n,t),0<(t=0<(n=(t=n).getClientRects()).length?n[0]:t.getBoundingClientRect()).width||0<t.height?P.some(t).map(yl):P.none()}function $l(n,t,e,r){return Zf(n,t,bl(o=e,u).fold(function(){return Hf.none(o)},function(n){return n.index+1<n.all.length?Hf.middle(o,n.all[n.index+1]):Hf.last(o)}),r);var o,u}function Gl(n,t,e,r){return Zf(n,t,bl(o=e,u).fold(function(){return Hf.none()},function(n){return 0<=n.index-1?Hf.middle(o,n.all[n.index-1]):Hf.first(o)}),r);var o,u}function Kl(n,t){return t=$f.exact(t,0,t,0),Fl(t)}function Xl(n,t){return t=Xf(n,t),qf(et.fromDom(t.startContainer),t.startOffset,et.fromDom(t.endContainer),t.endOffset)}function Yl(n,t){return{item:n,mode:t}}function Jl(t){return function(n){return 0===t.property().children(n).length}}function Ql(n){return At(n,"tr")}function Zl(n){return"br"===ft(n)}function na(t,n,e,r){return Tn(o=n,u=e).filter(Zl).orThunk(function(){return Tn(o,u-1).filter(Zl)}).bind(function(n){return r.traverse(n).fold(function(){return ws(n,r.gather,t).map(r.relative)},function(n){return wn(r=n).bind(function(t){var e=Sn(t);return vs(e,r).map(function(n){return{parent:t,children:e,element:r,index:n}})}).map(function(n){return Vf.on(n.parent,n.index)});var r})});var o,u}function ta(n,t,e,r){var o,u,i;return(Zl(t)?(o=n,u=t,(i=r).traverse(u).orThunk(function(){return ws(u,i.gather,o)}).map(i.relative)):na(n,t,e,r)).map(function(n){return{start:n,finish:n}})}function ea(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}}function ra(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}}function oa(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}}function ua(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function ia(n,t){return P.some(n.getRect(t))}function ca(n,t,e){return mt(t)?ia(n,t).map(ua):dt(t)?(n=n,t=t,(0<=(e=e)&&e<Ke(t)?n.getRangedRect(t,e,t,e+1):0<e?n.getRangedRect(t,e-1,t,e):P.none()).map(ua)):P.none()}function la(n,t){return mt(t)?ia(n,t).map(ua):dt(t)?n.getRangedRect(t,0,t,Ke(t)).map(ua):P.none()}function aa(t,n,e){return St(function(n,t){return t(n)},Tt,n,vc,r).fold(c,function(n){return la(t,n).exists(function(n){return t=n,(n=e).left<t.left||Math.abs(t.right-n.left)<1||n.left>t.right;var t})});var r}function fa(e,r,o){return e.getSelection().bind(function(t){return ta(r,t.finish,t.foffset,o).fold(function(){return P.some(Pi(t.finish,t.foffset))},function(n){n=e.fromSitus(n),n=bs.verify(e,t.finish,t.foffset,n.finish,n.foffset,o.failure,r);return bs.cata(n,function(n){return P.none()},function(){return P.none()},function(n){return P.some(Pi(n,0))},function(n){return P.some(Pi(n,Ke(n)))})})})}function sa(n,t){return Tt(n,function(n){return wn(n).exists(function(n){return rt(n,t)})},e).isSome();var e}function ma(u,i,c,n,l){return At(n,"td,th",i).bind(function(o){return At(o,"table",i).bind(function(n){return sa(l,n)?fa(t=u,e=i,r=c).bind(function(n){return Ss(t,e,n.element,n.offset,r,20).map(t.fromSitus)}).bind(function(t){return At(t.finish,"td,th",i).map(function(n){return{start:o,finish:n,range:t}})}):P.none();var t,e,r})})}function da(n,t,e,r,o,u){return nt().browser.isIE()?P.none():u(r,t).orThunk(function(){return ma(n,t,e,r,o).map(function(n){n=n.range;return es(P.some(os(n.start,n.soffset,n.finish,n.foffset)),!0)})})}function ga(n,r){return At(n,"tr",r).bind(function(e){return At(e,"table",r).bind(function(n){var t=Bn(n,"tr");return rt(e,t[0])?ds(ps,n,function(n){return Je(n).isSome()},r).map(function(n){var t=Ke(n);return es(P.some(os(n,t,n,t)),!0)}):P.none()})})}function pa(n,r){return At(n,"tr",r).bind(function(e){return At(e,"table",r).bind(function(n){var t=Bn(n,"tr");return rt(e,t[t.length-1])?gs(ps,n,function(n){return Ye(n).isSome()},r).map(function(n){return es(P.some(os(n,0,n,0)),!0)}):P.none()})})}function ha(n,t,e,r,o,u,i){return ma(n,e,r,o,u).bind(function(n){return us(t,e,n.start,n.finish,i)})}function ba(n,t){return At(n,"td,th",t)}var va=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},wa=C,ya=Pu,zn=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},Ca=zn("ephox-dragster").resolve,xa=M({compare:function(n,t){return co(t.left-n.left,t.top-n.top)},extract:function(n){return P.some(co(n.x,n.y))},sink:function(n,t){var e=function(n){var n=U({layerClass:Ca("blocker")},n),t=et.fromTag("div");Bt(t,"role","presentation"),Wt(t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Wu(t,Ca("blocker")),Wu(t,n.layerClass);return{element:function(){return t},destroy:function(){Ie(t)}}}(t),r=Mu(e.element(),"mousedown",n.forceDrop),o=Mu(e.element(),"mouseup",n.drop),u=Mu(e.element(),"mousemove",n.move),i=Mu(e.element(),"mouseout",n.delayDrop);return Du({element:e.element,start:function(n){Ae(n,e.element())},stop:function(){Ie(e.element())},destroy:function(){e.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,t){n.mutate(t.left,t.top)}}),Wn=zn("ephox-snooker").resolve,Sa=Wn("resizer-bar"),Ta=Wn("resizer-rows"),Ra=Wn("resizer-cols"),Oa=Wn("resizer-bar-dragging"),Da=function(n,o,u){var r=ao,i=so,n=Zu(n),c=Ru({beforeResize:Tu(["table","type"]),afterResize:Tu(["table","type"]),startDrag:Tu([])});return n.events.adjustHeight.bind(function(n){var t=n.table;c.trigger.beforeResize(t,"row");var e=r.delta(n.delta,t);$o(t,e,n.row,r),c.trigger.afterResize(t,"row")}),n.events.startAdjust.bind(function(n){c.trigger.startDrag()}),n.events.adjustWidth.bind(function(n){var t=n.table;c.trigger.beforeResize(t,"col");var e=i.delta(n.delta,t),r=u(t);Uo(t,e,n.column,o,r),c.trigger.afterResize(t,"col")}),{on:n.on,off:n.off,hideBars:n.hideBars,showBars:n.showBars,destroy:n.destroy,events:c.registry}},Aa=function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})},Ia=function(n){n.fire("TableSelectionClear")},Ba={"border-collapse":"collapse",width:"100%"},Ea={border:"1"},Pa="preservetable",ka=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ma=function(n){return"fixed"===ri(n)||!1===oi(n)},Na=function(n){return"responsive"===ri(n)},ja=function(n){n=n.getParam("table_clone_elements");return N(n)?P.some(n.split(/[ ,]/)):Array.isArray(n)?P.some(n):P.none()},_a=function(n){return et.fromDom(n.getBody())},za=function(t){return function(n){return rt(n,_a(t))}},Wa=function(n){return et.fromDom(n.selection.getStart())},Fa=function(n){var t=n;return{get:function(){return t},set:function(n){t=n}}},La=function(t){return Do(t).fold(function(){return xi(t)},function(n){return function(n,t){var e=au().exec(t);if(null!==e)return Si(e[1],n);t=fu().exec(t);if(null!==t){var r=parseInt(t[1],10);return Ti(r,n)}r=jr(n);return Ti(r,n)}(t,n)})},Ha=Ti,qa=Si,Va=function(n){Ht(n,"width");var t=Jt(n),t=0<t.length?t:Yt(n);T(t,function(n){Ht(n,"width"),Oi(n)}),Oi(n)},Ua="bar-",$a=function(i){function r(n){return"TABLE"===n.nodeName}function n(){return e}function c(n){return Ri(i,n)}function l(){return(gi(i)?Yo:Xo)()}function o(n,t,e){var r,o,u=Q(t,"e");""===f&&Ai(i,n),e!==a&&""!==f?(zt(n,"width",f),r=l(),t=c(n),u=gi(i)||u?ru(n).columns-1:0,Uo(n,e-a,u,r,t)):Ci(f)&&(o=parseFloat(f.replace("%","")),zt(n,"width",e*o/a+"%")),/^(\d+(\.\d+)?)px$/.test(f)&&(o=n,n=Oe.fromTable(o),Oe.hasColumns(n)||T(Yt(o),function(n){var t=Ft(n,"width");zt(n,"width",t),Mt(n,"width")}))}var a,f,u=P.none(),e=P.none(),s=P.none();return i.on("init",function(){var n,t,n=(t=Ei,(n=i).inline?pu(_a(n),Bi(),t):gu(et.fromDom(n.getDoc()),t));s=P.some(n),function(n){n=n.getParam("object_resizing",!0);return N(n)?"table"===n:n}(i)&&i.getParam("table_resize_bars",!0,"boolean")&&(t=l(),(t=Da(n,t,c)).on(),t.events.startDrag.bind(function(n){u=P.some(i.selection.getRng())}),t.events.beforeResize.bind(function(n){var t,e,r,o=n.table.dom;t=i,r=hi(e=o),o=bi(o),n=Ua+n.type,t.fire("ObjectResizeStart",{target:e,width:r,height:o,origin:n})}),t.events.afterResize.bind(function(n){var t,e,r=n.table,o=r.dom;wi(r),u.each(function(n){i.selection.setRng(n),i.focus()}),t=i,r=hi(e=o),o=bi(o),n=Ua+n.type,t.fire("ObjectResized",{target:e,width:r,height:o,origin:n}),i.undoManager.add()}),e=P.some(t))}),i.on("ObjectResizeStart",function(n){var t,e=n.target;r(e)&&(t=et.fromDom(e),T(i.dom.select(".mce-clonedresizable"),function(n){i.dom.addClass(n,"mce-"+di(i)+"-columns")}),!Cu(t)&&Ma(i)?Ii(i,t):!yu(t)&&si(i)&&Ai(i,t),xu(t)&&J(n.origin,Ua)&&Ai(i,t),a=n.width,f=Na(i)?"":yi(i,e).getOr(""))}),i.on("ObjectResized",function(n){var t,e=n.target;r(e)&&(t=et.fromDom(e),e=n.origin,J(e,"corner-")&&o(t,e,n.width),wi(t),ei(i,t.dom))}),i.on("SwitchMode",function(){e.each(function(n){i.mode.isReadOnly()?n.hideBars():n.showBars()})}),{lazyResize:n,lazyWire:function(){return s.getOr(gu(et.fromDom(i.getBody()),Ei))},destroy:function(){e.each(function(n){n.destroy()}),s.each(function(n){n=n,i.inline&&Ie(n.parent())})}}},Ga=function(t,n,e){return t.property().isText(n)&&0===t.property().getText(n).trim().length||t.property().isComment(n)?e(n).bind(function(n){return Ga(t,n,e).orThunk(function(){return P.some(n)})}):P.none()},Ka=function(n,t){var e=Ga(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return Pi(e,ki(n,e));t=n.property().children(e);return 0<t.length?Ka(n,t[t.length-1]):Pi(e,ki(n,e))},Xa=Ka,Ya=ze(),Ja=function(n,t){return gn(t,n.section)},Fn=function(c,t,l,a,f){return function(r,o,n,e,u){var i=Oe.fromTable(o);return t(i,n).map(function(n){var t=Gi(i,e,!1),n=c(t,n,rt,f(e));return{grid:Xi(n.grid,e),cursor:n.cursor}}).fold(function(){return P.none()},function(n){var t=qi(o,n.grid),e=P.from(u).getOrThunk(function(){return La(o)});return l(o,n.grid,e),a(o),Xu(r,o),P.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})})}},Ln=function(t,n){return Xt(n.element).bind(function(n){return Yi(t,n)})},st=function(t,n){var e=S(n.selection,function(n){return Xt(n).bind(function(n){return Yi(t,n)})}),e=pr(e);return 0<e.length?P.some({cells:e,generators:n.generators,clipboard:n.clipboard}):P.none()},Qa=function(e){return{is:function(n){return e===n},isValue:C,isError:c,getOr:l(e),getOrThunk:l(e),getOrDie:l(e),or:function(n){return Qa(e)},orThunk:function(n){return Qa(e)},fold:function(n,t){return t(e)},map:function(n){return Qa(n(e))},mapError:function(n){return Qa(e)},each:function(n){n(e)},bind:function(n){return n(e)},exists:function(n){return n(e)},forall:function(n){return n(e)},toOptional:function(){return P.some(e)}}},Za=function(e){return{is:c,isValue:c,isError:C,getOr:a,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(e),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,t){return n(e)},map:function(n){return Za(e)},mapError:function(n){return Za(n(e))},each:y,bind:function(n){return Za(e)},exists:c,forall:C,toOptional:P.none}},nf={value:Qa,error:Za,fromOption:function(n,t){return n.fold(function(){return Za(t)},Qa)}},tf=k(["cell","row","replace","gap","col","colgroup"]),ht=function(t,e){void 0===e&&(e=bc),tf(t);function r(n){return n=e(n),"col"!==ft((n=n).element)?t.cell(n):t.col(n)}function o(n){var t=r(n);return u.get().isNone()&&u.set(P.some(t)),i=P.some({item:n,replacement:t}),t}var u=Fa(P.none()),i=P.none();return{getOrInit:function(t,e){return i.fold(function(){return o(t)},function(n){return e(t,n.item)?n.replacement:o(t)})},cursor:u.get}},M=function(o,c){return function(e){var r=Fa(P.none());tf(e);function u(n){var t=e.replace(n,c,{scope:o});return i.push({item:n,sub:t}),r.get().isNone()&&r.set(P.some(t)),t}var i=[];return{replaceOrInit:function(t,e){return r=t,o=e,m(i,function(n){return o(n.item,r)}).fold(function(){return u(t)},function(n){return e(t,n.item)?n.sub:u(t)});var r,o},cursor:r.get}}},zn=function(e){tf(e);var n=Fa(P.none());return{combine:function(t){return n.get().isNone()&&n.set(P.some(t)),function(){var n=e.cell({element:t,colspan:1,rowspan:1});return Ht(n,"width"),Ht(t,"width"),n}},cursor:n.get}},ef=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rf=ze(),Wn=function(n){0===Yt(n).length&&Ie(n)},of=function(n,t,e){return P.from(n[t]).bind(function(n){return P.from(n.cells[e]).bind(function(n){return P.from(n.element)})})},uf=function(n,t){t=b(n,t);return 0===t.length?P.some("td"):t.length===n.length?P.some("th"):P.none()},k=function(n,t,e){var r=Oe.generate(t),t=e.getWidths(r,e);Vo(r,t,e)},cf=Fn(function(n,t,e,r){var o=t[0].row,u=t[0].row,i=Rc(t),n=f(i,function(n,t){return fc(n,u,o,e,r.getOrInit)},n);return Tc(n,u,t[0].column)},Ji,y,y,ht),lf=Fn(function(n,t,e,r){var o=Rc(t),u=o[o.length-1].row,i=o[o.length-1].row+o[o.length-1].rowspan,n=f(o,function(n,t){return fc(n,i,u,e,r.getOrInit)},n);return Tc(n,i,t[0].column)},Ji,y,y,ht),af=Fn(function(n,t,e,r){var o=Oc(t),u=o[0].column,i=o[0].column,n=f(o,function(n,t){return sc(n,i,u,e,r.getOrInit)},n);return Tc(n,t[0].row,i)},Ji,k,y,ht),ff=Fn(function(n,t,e,r){var o=t[t.length-1].column,u=t[t.length-1].column+t[t.length-1].colspan,i=Oc(t),n=f(i,function(n,t){return sc(n,u,o,e,r.getOrInit)},n);return Tc(n,t[0].row,u)},Ji,k,y,ht),sf=Fn(function(n,t,e,r){var o=Oc(t),o=function(n,e,r){n=S(n,function(n){var t=n.cells.slice(0,e).concat(n.cells.slice(r+1));return gn(t,n.section)});return b(n,function(n){return 0<n.cells.length})}(n,o[0].column,o[o.length-1].column),t=Sc(o,t[0].row,t[0].column);return xc(o,t)},Ji,k,Wn,ht),mf=Fn(function(n,t,e,r){var o,u,i=Rc(t),n=(o=n,u=i[0].row,n=i[i.length-1].row,i=Fi(o),o=i.rows,i.cols.concat(o.slice(0,u)).concat(o.slice(n+1))),t=Sc(n,t[0].row,t[0].column);return xc(n,t)},Ji,y,Wn,ht),df=(Fn(function(n,t,e,r){r=pc(n,t.column,e,r.replaceOrInit);return Tc(r,t.row,t.column)},Ln,y,y,M("row","th")),Fn(function(n,t,e,r){var o=Oc(t),n=f(o,function(n,t){return pc(n,t.column,e,r.replaceOrInit)},n);return Tc(n,t[0].row,t[0].column)},Ji,y,y,M("row","th"))),gf=(Fn(function(n,t,e,r){r=pc(n,t.column,e,r.replaceOrInit);return Tc(r,t.row,t.column)},Ln,y,y,M(null,"td")),Fn(function(n,t,e,r){var o=Oc(t),n=f(o,function(n,t){return pc(n,t.column,e,r.replaceOrInit)},n);return Tc(n,t[0].row,t[0].column)},Ji,y,y,M(null,"td"))),pf=(Fn(function(n,t,e,r){r=hc(n,t.row,e,r.replaceOrInit);return Tc(r,t.row,t.column)},Ln,y,y,M("col","th")),Fn(function(n,t,e,r){var o=Rc(t),n=f(o,function(n,t){return hc(n,t.row,e,r.replaceOrInit)},n);return Tc(n,t[0].row,t[0].column)},Ji,y,y,M("col","th")),Fn(function(n,t,e,r){r=hc(n,t.row,e,r.replaceOrInit);return Tc(r,t.row,t.column)},Ln,y,y,M(null,"td")),Fn(function(n,t,e,r){var o=Rc(t),n=f(o,function(n,t){return hc(n,t.row,e,r.replaceOrInit)},n);return Tc(n,t[0].row,t[0].column)},Ji,y,y,M(null,"td")),Fn(function(n,t,e,r){var o=t.cells;Cc(o);t=function(n,t,e){var r=Fi(n).rows;if(0===r.length)return n;for(var o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)Ni(r[o],u,dn(e(),!1));return n}(n,t.bounds,l(o[0]));return xc(t,P.from(o[0]))},function(n,t){return t.mergable},y,y,zn)),hf=Fn(function(n,t,e,r){n=s(t,function(n,t){return Qi(n,t,e,r.combine(t))},n);return xc(n,P.from(t[0]))},function(n,t){return t.unmergable},k,y,zn),bf=Fn(function(n,e,t,r){var o=function(n,t){n=Oe.fromTable(n);return Gi(n,t,!0)}(e.clipboard,e.generators),u={row:e.row,column:e.column};return cc(u,n,o,e.generators,t).fold(function(){return xc(n,P.some(e.element))},function(n){var t=Sc(n,e.row,e.column);return xc(n,t)})},function(t,e){return Xt(e.element).bind(function(n){return Yi(t,n).map(function(n){return U(U({},n),{generators:e.generators,clipboard:e.clipboard})})})},k,y,ht),vf=Fn(function(n,t,e,r){var o=Fi(n).rows,u=t.cells[0].column,o=o[t.cells[0].row],o=Dc(t.clipboard,t.generators,o),e=lc(u,n,o,t.generators,e),t=Sc(e,t.cells[0].row,t.cells[0].column);return xc(e,t)},st,y,y,ht),wf=Fn(function(n,t,e,r){var o=Fi(n).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,o=o[t.cells[0].row],o=Dc(t.clipboard,t.generators,o),e=lc(u,n,o,t.generators,e),t=Sc(e,t.cells[0].row,t.cells[0].column);return xc(e,t)},st,y,y,ht),yf=Fn(function(n,t,e,r){var o=Fi(n).rows,u=t.cells[0].row,o=o[u],o=Dc(t.clipboard,t.generators,o),e=ac(u,n,o,t.generators,e),t=Sc(e,t.cells[0].row,t.cells[0].column);return xc(e,t)},st,y,y,ht),Cf=Fn(function(n,t,e,r){var o=Fi(n).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,o=o[t.cells[0].row],o=Dc(t.clipboard,t.generators,o),e=ac(u,n,o,t.generators,e),t=Sc(e,t.cells[0].row,t.cells[0].column);return xc(e,t)},st,y,y,ht),Fn=function(r){return function(n){var t,e=ft(n),n="col"===e||"colgroup"===e?Se(t=n).bind(function(n){return xr(n,Pr.firstSelectedSelector)}).fold(function(){return t},function(n){return n[0]}):n;return At(n,r)}},xf=Fn("th,td"),Sf=Fn("th,td,caption"),Tf=function(a,n,r){function t(n){return"table"===ft(_a(n))}function e(u,i,c,l){return function(n,t){wi(n);var e=l(),r=et.fromDom(a.getDoc()),o=Er(c,r,f),r=Ri(a,n);return i(n)?u(e,n,t,o,r).bind(function(n){return T(n.newRows,function(n){ni(a,n.dom)}),T(n.newCells,function(n){ti(a,n.dom)}),n.cursor.map(function(n){var t=Xa(Ya,n),n=a.dom.createRng();return n.setStart(t.element.dom,t.offset),n.setEnd(t.element.dom,t.offset),n})}):P.none()}}function o(n,t){return fn(n,"type").filter(function(n){return x(t,n)})}var f=ja(a),u=e(mf,function(n){return!1===t(a)||1<ru(n).rows},y,n),i=e(sf,function(n){return!1===t(a)||1<ru(n).columns},y,n),c=e(cf,C,y,n),l=e(lf,C,y,n),s=e(af,C,Mi,n),m=e(ff,C,Mi,n),d=e(pf,C,y,n),g=e(hf,C,y,n),p=e(vf,C,y,n),h=e(wf,C,y,n),b=e(yf,C,y,n),v=e(Cf,C,y,n),w=e(bf,C,y,n);return{deleteRow:u,deleteColumn:i,insertRowsBefore:c,insertRowsAfter:l,insertColumnsBefore:s,insertColumnsAfter:m,mergeCells:d,unmergeCells:g,pasteColsBefore:p,pasteColsAfter:h,pasteRowsBefore:b,pasteRowsAfter:v,pasteCells:w,setTableCellType:function(e,n){return o(n,["td","th"]).each(function(n){var t=S(jc(Wa(e),r),function(n){return n.dom});Mc(e,t,n,null)})},setTableRowType:function(e,n){return o(n,["header","body","footer"]).each(function(t){S(_c(Wa(e),Pr.selected),function(n){return Nc(e,n.dom,t)})})},makeColumnsHeader:e(df,C,y,n),unmakeColumnsHeader:e(gf,C,y,n),getTableRowType:function(n){var t=_c(Wa(n),Pr.selected);if(0<t.length){var e=S(t,function(n){return Ec(0,n.dom)}),n=x(e,"header"),t=x(e,"footer");if(n||t){e=x(e,"body");return!n||e||t?n||e||!t?"":"footer":"header"}return"body"}},getTableCellType:function(n){return uf(jc(Wa(n),r),function(n){return"th"===ft(n)}).getOr("")},getTableColType:Ac}},Rf={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Of=function(n,t,e,r){return{insertTable:(o=n,function(n,t,e){e=qc(o,t,n,e=void 0===e?{}:e,"Invalid values for insertTable - rows and columns values are required to insert a table.");return o.undoManager.add(),e}),setClipboardRows:Uc(t.setRows),getClipboardRows:Vc(t.getRows),setClipboardCols:Uc(t.setColumns),getClipboardCols:Vc(t.getColumns),resizeHandler:e,selectionTargets:r};var o},Df=tinymce.util.Tools.resolve("tinymce.util.Tools"),Af=function(n,t){return(t||[]).concat(S(n,function(n){var t=n.text||n.title;return Qc(n)?{text:t,items:Af(n.menu)}:{text:t,value:n.value}}))},st=function(n,t,e,r){return m(n,function(n){return e.formatter.matchNode(r,t+n)}).getOr("")},If=h(st,["left","center","right"],"align"),Bf=h(st,["top","middle","bottom"],"valign"),Ef=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],ht=function(u){return function(e,r){var o=e.dom;return{setAttrib:function(n,t){u&&!t||o.setAttrib(r,n,t)},setStyle:function(n,t){u&&!t||o.setStyle(r,n,t)},setFormat:function(n,t){u&&!t||(""===t?e.formatter.remove(n,{value:null},r,!0):e.formatter.apply(n,{value:t},r))}}}},Pf={normal:ht(!1),ifTruthy:ht(!0)},kf=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Mf=tinymce.util.Tools.resolve("tinymce.Env"),Nf=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)N(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var o=0;o<t.children.length;o++)Nf(n,t.children[o],e,r)},jf=function(u,r,e,i,t){function c(n){return Se(n,m)}function l(t){return function(n){u.selection.setRng(n),u.focus(),e.clear(t),wi(t),ei(u,t.dom)}}function o(r){return hl(u).each(function(e){c(e).each(function(n){var t=dr(i,n,e);r(n,t).each(l(n))})})}function a(){return hl(u).map(function(r){return c(r).bind(function(n){var t=dr(i,n,r),e=Er(y,et.fromDom(u.getDoc()),P.none());return Kc(n,t,e)})})}function f(){return hl(u).map(function(e){return c(e).bind(function(n){var t=dr(i,n,e);return Gc(n,t)})})}function s(o,n){return n().each(function(n){var r=S(n,nr);hl(u).each(function(n){return c(n).each(function(n){var t,e=lr(et.fromDom(u.getDoc())),e=(t=r,e=e,{selection:fr(i),clipboard:t,generators:e});o(n,e).each(l(n))})})})}var m=za(u);un({mceTableSplitCells:function(){return o(r.unmergeCells)},mceTableMergeCells:function(){return o(r.mergeCells)},mceTableInsertRowBefore:function(){return o(r.insertRowsBefore)},mceTableInsertRowAfter:function(){return o(r.insertRowsAfter)},mceTableInsertColBefore:function(){return o(r.insertColumnsBefore)},mceTableInsertColAfter:function(){return o(r.insertColumnsAfter)},mceTableDeleteCol:function(){return o(r.deleteColumn)},mceTableDeleteRow:function(){return o(r.deleteRow)},mceTableCutCol:function(n){return f().each(function(n){t.setColumns(n),o(r.deleteColumn)})},mceTableCutRow:function(n){return a().each(function(n){t.setRows(n),o(r.deleteRow)})},mceTableCopyCol:function(n){return f().each(function(n){return t.setColumns(n)})},mceTableCopyRow:function(n){return a().each(function(n){return t.setRows(n)})},mceTablePasteColBefore:function(n){return s(r.pasteColsBefore,t.getColumns)},mceTablePasteColAfter:function(n){return s(r.pasteColsAfter,t.getColumns)},mceTablePasteRowBefore:function(n){return s(r.pasteRowsBefore,t.getRows)},mceTablePasteRowAfter:function(n){return s(r.pasteRowsAfter,t.getRows)},mceTableDelete:function(){return pl(u).each(function(n){Se(n,m).filter(g(m)).each(function(n){var t=et.fromText("");me(n,t),Ie(n),u.dom.isEmpty(u.getBody())?(u.setContent(""),u.selection.setCursorLocation()):((n=u.dom.createRng()).setStart(t.dom,0),n.setEnd(t.dom,0),u.selection.setRng(n),u.nodeChanged())})})},mceTableSizingMode:function(n,t){return e=t,pl(u).each(function(n){Na(u)||Ma(u)||si(u)||Se(n,m).each(function(n){"relative"!==e||yu(n)?"fixed"!==e||Cu(n)?"responsive"!==e||xu(n)||Va(n):Ii(u,n):Ai(u,n),wi(n),ei(u,n.dom)})});var e}},function(n,t){return u.addCommand(t,n)});function d(t,n){n.each(function(n){ei(t,n.dom)})}un({mceTableCellType:function(n,t){var e=Se(Wa(u),m);r.setTableCellType(u,t),d(u,e)},mceTableRowType:function(n,t){var e=Se(Wa(u),m);r.setTableRowType(u,t),d(u,e)}},function(n,t){return u.addCommand(t,n)}),u.addCommand("mceTableColType",function(n,t){return fn(t,"type").each(function(n){return o("th"===n?r.makeColumnsHeader:r.unmakeColumnsHeader)})}),un({mceTableProps:h(gl,u,!1),mceTableRowProps:h(ml,u),mceTableCellProps:h(ll,u,i)},function(n,t){return u.addCommand(t,function(){return n()})}),u.addCommand("mceInsertTable",function(n,t){j(t)&&0<ut(t).length?qc(u,t.rows,t.columns,t.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):gl(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(n,t){function r(n){return"tablecell"+n.toLowerCase().replace("-","")}var o;!j(t)||0!==(o=jc(Wa(u),i)).length&&(function(n){for(var t in n)if(it.call(n,t))return!1;return!0}(t=ln(t,function(n,t){return u.formatter.has(r(t))&&N(n)}))||(un(t,function(t,e){T(o,function(n){Pf.normal(u,n.dom).setFormat(r(e),t)})}),c(o[0]).each(function(n){return ei(u,n.dom,{structure:!1,style:!0})})))})},_f=function(e,r,o){var n=za(e);un({mceTableRowType:function(){return r.getTableRowType(e)},mceTableCellType:function(){return r.getTableCellType(e)},mceTableColType:function(){return xf(Wa(e)).bind(function(e){return Se(e,n).map(function(n){var t=dr(o,n,e);return r.getTableColType(n,t)})}).getOr("")}},function(n,t){return e.addQueryValueHandler(t,n)})},zf=function(){function t(n){n.set(P.none())}var e=Fa(P.none()),r=Fa(P.none());return{getRows:e.get,setRows:function(n){e.set(n),t(r)},clearRows:function(){return t(e)},getColumns:r.get,setColumns:function(n){r.set(n),t(e)},clearColumns:function(){return t(r)}}},Wf={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Ff=function(n){n.formatter.register(Wf)},Lf=n([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Hf=U(U({},Lf),{none:function(n){return Lf.none(n=void 0===n?void 0:n)}}),qf=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},Fn=n([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Vf={before:Fn.before,on:Fn.on,after:Fn.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(a,a,a)}},Uf=n([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$f={domRange:Uf.domRange,relative:Uf.relative,exact:Uf.exact,exactFromRange:function(n){return Uf.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){n=n.match({domRange:function(n){return et.fromDom(n.startContainer)},relative:function(n,t){return Vf.getStart(n)},exact:function(n,t,e,r){return n}});return et.fromDom(vn(n).dom.defaultView)},range:qf},Gf=function(n,t){return n.selectNodeContents(t.dom)},Kf=n([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Xf=function(u,n){return xl(u,n).match({ltr:function(n,t,e,r){var o=u.document.createRange();return o.setStart(n.dom,t),o.setEnd(e.dom,r),o},rtl:function(n,t,e,r){var o=u.document.createRange();return o.setStart(e.dom,r),o.setEnd(n.dom,t),o}})},Yf=(Kf.ltr,Kf.rtl,function(n,t,e,r){return dt(t)?function(t,e,r,o){var n=t.dom.createRange();n.selectNode(e.dom);n=n.getClientRects();return I(n,function(n){return Sl(n,r,o)?P.some(n):P.none()}).map(function(n){return Tl(t,e,r,o,n)})}(n,t,e,r):(t=t,u=e,i=r,c=(o=n).dom.createRange(),t=Sn(t),I(t,function(n){return c.selectNode(n.dom),Sl(c.getBoundingClientRect(),u,i)?Yf(o,n,u,i):P.none()}));var o,u,i,c}),Jf=document.caretPositionFromPoint?function(e,n,t){return P.from(e.dom.caretPositionFromPoint(n,t)).bind(function(n){if(null===n.offsetNode)return P.none();var t=e.dom.createRange();return t.setStart(n.offsetNode,n.offset),t.collapse(),P.some(t)})}:document.caretRangeFromPoint?function(n,t,e){return P.from(n.dom.caretRangeFromPoint(t,e))}:function(o,u,t){return et.fromPoint(o,u,t).bind(function(r){function n(){return n=o,e=u,(0===Sn(t=r).length?Al:Dl)(n,t,e);var n,t,e}return 0===Sn(r).length?n():Il(o,r,u,t).orThunk(n)})},Qf=tinymce.util.Tools.resolve("tinymce.util.VK"),Zf=function(r,n,t,o){return t.fold(P.none,P.none,function(n,t){return Ye(t).map(function(n){return Kl(0,n)})},function(e){return Se(e,n).bind(function(n){var t=mr(e);return r.undoManager.transact(function(){o.insertRowsAfter(n,t)}),function(n){n=Bn(n,"tr");return A(n).bind(function(n){return Dt(n,"td,th").map(function(n){return Kl(0,n)})})}(n)})})},ns=["table","li","dl"],ts=function(t,e,r){var o,u,n;t.keyCode===Qf.TAB&&(o=_a(e),u=function(n){var t=ft(n);return rt(n,o)||x(ns,t)},(n=e.selection.getRng()).collapsed&&(n=et.fromDom(n.startContainer),Xt(n,u).each(function(n){t.preventDefault(),(t.shiftKey?Gl:$l)(e,u,n,r).each(function(n){e.selection.setRng(n)})})))},es=function(n,t){return{selection:n,kill:t}},rs=function(n,t,e,r){return{start:Vf.on(n,t),finish:Vf.on(e,r)}},os=rs,us=function(e,n,r,t,o){return rt(r,t)?P.none():Fe(r,t,n).bind(function(n){var t=n.boxes.getOr([]);return 0<t.length?(o(e,t,n.start,n.finish),P.some(es(P.some(os(r,0,r,Ke(r))),!0))):P.none()})},st=function(n,t,e,r){return void 0===r&&(r=is),n.property().parent(t).map(function(n){return Yl(n,r)})},is=function(n,t,e,r){return void 0===r&&(r=cs),e.sibling(n,t).map(function(n){return Yl(n,r)})},cs=function(n,t,e,r){void 0===r&&(r=cs);t=n.property().children(t);return e.first(t).map(function(n){return Yl(n,r)})},ls=[{current:st,next:is,fallback:P.none()},{current:is,next:cs,fallback:P.some(st)},{current:cs,next:cs,fallback:P.some(is)}],as=function(t,e,r,o,n){return m(n=void 0===n?ls:n,function(n){return n.current===r}).bind(function(n){return n.current(t,e,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return as(t,e,n,o)})})})},fs=function(){return{sibling:function(n,t){return n.query().prevSibling(t)},first:function(n){return 0<n.length?P.some(n[n.length-1]):P.none()}}},ss=function(){return{sibling:function(n,t){return n.query().nextSibling(t)},first:function(n){return 0<n.length?P.some(n[0]):P.none()}}},ms=function(t,n,e,r,o,u){return as(t,n,r,o).bind(function(n){return u(n.item)?P.none():e(n.item)?P.some(n.item):ms(t,n.item,e,n.mode,o,u)})},ds=function(n,t,e,r){return ms(n,t,e,is,fs(),r)},gs=function(n,t,e,r){return ms(n,t,e,is,ss(),r)},ps=ze(),ht=function(n,t){return ds(ps,n,Jl(ps),t)},Fn=function(n,t){return gs(ps,n,Jl(ps),t)},hs=n([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),bs=U(U({},hs),{verify:function(e,t,n,r,o,u,i){return At(r,"td,th",i).bind(function(n){return At(t,"td,th",i).map(function(t){return rt(n,t)?rt(r,n)&&Ke(n)===o?u(t):hs.none("in same cell"):Cr(Ql,[n,t]).fold(function(){return function(n,t,e){t=n.getRect(t),e=n.getRect(e);return e.right>t.left&&e.left<t.right}(e,t,n)?hs.success():u(t)},function(n){return u(t)})})}).getOr(hs.none("default"))},cata:function(n,t,e,r,o){return n.fold(t,e,r,o)}}),vs=function(n,t){return v(n,h(rt,t))},ws=function(n,t,e){return t(n,e).bind(function(n){return dt(n)&&0===Be(n).trim().length?ws(n,t,e):P.some(n)})},ys=n([{none:[]},{retry:["caret"]}]),st={point:function(n){return n.bottom},adjuster:function(n,t,e,r,o){var u=ea(o,5);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?ys.retry(u):e.top===o.bottom?ys.retry(ea(o,1)):aa(n,t,o)?ys.retry(oa(u,5,0)):ys.none()},move:ea,gather:Fn},Cs=function(e,r,o,u,i){return 0===i?P.some(u):(n=e,t=u.left,c=r.point(u),n.elementFromPoint(t,c).filter(function(n){return"table"===ft(n)}).isSome()?(c=i-1,Cs(e,r,o,r.move(u,5),c)):e.situsFromPoint(u.left,r.point(u)).bind(function(n){return n.start.fold(P.none,function(t){return la(e,t).bind(function(n){return r.adjuster(e,t,n,o,u).fold(P.none,function(n){return Cs(e,r,o,n,i-1)})}).orThunk(function(){return P.some(u)})},P.none)}));var n,t,c},n=function(t,e,n){var r,o=t.move(n,5),u=Cs(e,t,n,o,100).getOr(o);return r=u,n=e,((o=t).point(r)>n.getInnerHeight()?P.some(o.point(r)-n.getInnerHeight()):o.point(r)<0?P.some(-o.point(r)):P.none()).fold(function(){return e.situsFromPoint(u.left,t.point(u))},function(n){return e.scrollBy(0,n),e.situsFromPoint(u.left,t.point(u)-n)})},xs={tryUp:h(n,{point:function(n){return n.top},adjuster:function(n,t,e,r,o){var u=ra(o,5);return Math.abs(e.top-r.top)<1||e.bottom<o.top?ys.retry(u):e.bottom===o.top?ys.retry(ra(o,1)):aa(n,t,o)?ys.retry(oa(u,5,0)):ys.none()},move:ra,gather:ht}),tryDown:h(n,st),ieTryUp:function(n,t){return n.situsFromPoint(t.left,t.top-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left,t.bottom+5)},getJumpSize:l(5)},Ss=function(e,r,o,u,i,c){return 0===c?P.none():Os(e,r,o,u,i).bind(function(n){var t=e.fromSitus(n),t=bs.verify(e,o,u,t.finish,t.foffset,i.failure,r);return bs.cata(t,function(){return P.none()},function(){return P.some(n)},function(n){return rt(o,n)&&0===u?Ts(e,o,u,ra,i):Ss(e,r,n,0,i,c-1)},function(n){return rt(o,n)&&u===Ke(n)?Ts(e,o,u,ea,i):Ss(e,r,n,Ke(n),i,c-1)})})},Ts=function(t,n,e,r,o){return ca(t,n,e).bind(function(n){return Rs(t,o,r(n,xs.getJumpSize()))})},Rs=function(n,t,e){var r=nt().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):P.none()},Os=function(t,n,e,r,o){return ca(t,e,r).bind(function(n){return Rs(t,o,n)})};function Ds(o,u,t,i){var e,r=(e=Fa(P.none()),{clear:function(){return e.set(P.none())},set:function(n){return e.set(P.some(n))},isSet:function(){return e.get().isSome()},on:function(n){return e.get().each(n)}}),c=r.clear;return{clearstate:c,mousedown:function(n){i.clear(u),ba(n.target,t).each(r.set)},mouseover:function(n){r.on(function(r){i.clearBeforeUpdate(u),ba(n.target,t).each(function(e){Fe(r,e,t).each(function(n){var t=n.boxes.getOr([]);(1<t.length||1===t.length&&!rt(r,e))&&(i.selectRange(u,t,n.start,n.finish),o.selectContents(e))})})})},mouseup:function(n){c()}}}function As(u){return{elementFromPoint:function(n,t){return et.fromPoint(et.fromDom(u.document),n,t)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(n,t,e,r){r=$f.exact(n,t,e,r);return Ul(u,r)},getSelection:function(){return Vl(u).map(function(n){return Xl(u,n)})},fromSitus:function(n){n=$f.relative(n.start,n.finish);return Xl(u,n)},situsFromPoint:function(n,t){return function(n,t,e){n=et.fromDom(n.document);return Jf(n,t,e).map(function(n){return qf(et.fromDom(n.startContainer),n.startOffset,et.fromDom(n.endContainer),n.endOffset)})}(u,n,t).map(function(n){return rs(n.start,n.soffset,n.finish,n.foffset)})},clearSelection:function(){Ml(u).each(function(n){return n.removeAllRanges()})},collapseSelection:function(o){void 0===o&&(o=!1),Vl(u).each(function(n){return n.fold(function(n){return n.collapse(o)},function(n,t){t=o?n:t;Wl(u,t,t)},function(n,t,e,r){e=o?n:e,r=o?t:r;zl(u,e,r,e,r)})})},setSelection:function(n){zl(u,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,t){Wl(u,n,t)},selectContents:function(n){ql(u,n)},getInnerHeight:function(){return u.innerHeight},getScrollY:function(){var n,t;return(n=et.fromDom(u.document),t=void 0!==n?n.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,t=t.body.scrollTop||t.documentElement.scrollTop,co(n,t)).top},scrollBy:function(n,t){!function(n,t,e){e=(void 0!==e?e.dom:document).defaultView;e&&e.scrollBy(n,t)}(n,t,et.fromDom(u.document))}}}function Is(n,t){return{rows:n,cols:t}}function Bs(e,n){T(n,function(n){var t;t=n,ju(n=e)?n.dom.classList.remove(t):zu(n,t),Fu(n)})}var Es={traverse:xn,gather:Fn,relative:Vf.before,otherRetry:xs.tryDown,ieRetry:xs.ieTryDown,failure:bs.failedDown},Ps={traverse:Cn,gather:ht,relative:Vf.before,otherRetry:xs.tryUp,ieRetry:xs.ieTryUp,failure:bs.failedUp},ht=function(t){return function(n){return n===t}},ks=ht(38),Ms=ht(40),Ns=function(n){return 37<=n&&n<=40},js={isBackward:ht(37),isForward:ht(39)},_s={isBackward:ht(39),isForward:ht(37)},zs=function(n,t,e,r){r=Ds(As(n),t,e,r);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}},Ws=function(n,m,d,g){function l(){return g.clear(m),P.none()}var a=As(n);return{keydown:function(n,t,e,r,o,u){var n=n.raw,i=n.which,c=!0===n.shiftKey;return Le(m,g.selectedSelector).fold(function(){return Ms(i)&&c?h(ha,a,m,d,Es,r,t,g.selectRange):ks(i)&&c?h(ha,a,m,d,Ps,r,t,g.selectRange):Ms(i)?h(da,a,d,Es,r,t,pa):ks(i)?h(da,a,d,Ps,r,t,ga):P.none},function(o){function n(n){return function(){return I(n,function(n){return t=n.rows,n=n.cols,e=m,qe(o,t,n,(r=g).firstSelectedSelector,r.lastSelectedSelector).map(function(n){return r.clearBeforeUpdate(e),r.selectRange(e,n.boxes,n.start,n.finish),n.boxes});var t,e,r}).fold(function(){return He(m,g.firstSelectedSelector,g.lastSelectedSelector).map(function(n){var t=Ms(i)||u.isForward(i)?Vf.after:Vf.before;return a.setRelativeSelection(Vf.on(n.first,0),t(n.table)),g.clear(m),es(P.none(),!0)})},function(n){return P.some(es(P.none(),!0))})}}return Ms(i)&&c?n([Is(1,0)]):ks(i)&&c?n([Is(-1,0)]):u.isBackward(i)&&c?n([Is(0,-1),Is(-1,0)]):u.isForward(i)&&c?n([Is(0,1),Is(1,0)]):Ns(i)&&!1==c?l:P.none})()},keyup:function(c,l,a,f,s){return Le(m,g.selectedSelector).fold(function(){var e,r,n,o,u,t=c.raw,i=t.which;return!1!=(!0===t.shiftKey)&&Ns(i)?(e=m,r=d,n=l,t=a,o=f,i=s,u=g.selectRange,rt(n,o)&&t===i?P.none():At(n,"td,th",r).bind(function(t){return At(o,"td,th",r).bind(function(n){return us(e,r,t,n,u)})})):P.none()},P.none)}}},Fs=function(n,r,t,o){var u=As(n);return function(n,e){o.clearBeforeUpdate(r),Fe(n,e,t).each(function(n){var t=n.boxes.getOr([]);o.selectRange(r,t,n.start,n.finish),u.selectContents(e),u.collapseSelection()})}},Ls={byClass:function(o){function u(n){n=Bn(n,o.selectedSelector),T(n,r)}var t,e,i=(t=o.selected,function(n){Wu(n,t)}),r=(e=[o.selected,o.lastSelected,o.firstSelected],function(n){Bs(n,e)});return{clearBeforeUpdate:u,clear:u,selectRange:function(n,t,e,r){u(n),T(t,i),Wu(e,o.firstSelected),Wu(r,o.lastSelected)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o,u,t){function e(n){Mt(n,o.selected),Mt(n,o.firstSelected),Mt(n,o.lastSelected)}function i(n){Bt(n,o.selected,"1")}function c(n){r(n),t()}var r=function(n){n=Bn(n,o.selectedSelector);T(n,e)};return{clearBeforeUpdate:r,clear:c,selectRange:function(n,t,e,r){c(n),T(t,i),Bt(e,o.firstSelected,"1"),Bt(r,o.lastSelected,"1"),u(t,e,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},Hs=function(n,t,e){var r=Oe.fromTable(n);return Ji(r,t).map(function(n){var t=Gi(r,e,!1);return{upOrLeftCells:function(n,t,e){n=n.slice(0,t[t.length-1].row+1),e=Xi(n,e);return R(e,function(n){n=n.cells.slice(0,t[t.length-1].column+1);return S(n,function(n){return n.element})})}(t,n,e),downOrRightCells:function(n,t,e){n=n.slice(t[0].row+t[0].rowspan-1,n.length),e=Xi(n,e);return R(e,function(n){n=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return S(n,function(n){return n.element})})}(t,n,e)}})},qs=function(n){return!1===Lu(et.fromDom(n.target),"ephox-snooker-resizer-bar")};function Vs(s,m,n){var d=Ls.byAttr(Pr,function(r,o,u){n.targets().each(function(e){Se(o).each(function(n){var t=ja(s),t=Er(y,et.fromDom(s.getDoc()),t),t=Hs(n,e,t);Aa(s,r,o,u,t)})})},function(){return Ia(s)});return s.on("init",function(n){var e=s.getWin(),r=_a(s),t=za(s),o=zs(e,r,t,d),u=Ws(e,r,t,d),i=Fs(e,r,t,d);s.on("TableSelectorChange",function(n){return i(n.start,n.finish)});function c(n,t){!0===n.raw.shiftKey&&(t.kill&&n.kill(),t.selection.each(function(n){n=$f.relative(n.start,n.finish),n=Xf(e,n);s.selection.setRng(n)}))}function l(n){return 0===n.button}var a,f,t=(a=Fa(et.fromDom(r)),f=Fa(0),{touchEnd:function(n){var t,e,r=et.fromDom(n.target);"td"!==ft(r)&&"th"!==ft(r)||(t=a.get(),e=f.get(),rt(t,r)&&n.timeStamp-e<300&&(n.preventDefault(),i(r,r))),a.set(r),f.set(n.timeStamp)}});s.on("dragstart",function(n){o.clearstate()}),s.on("mousedown",function(n){l(n)&&qs(n)&&o.mousedown(ya(n))}),s.on("mouseover",function(n){var t;(void 0===(t=n).buttons||Mf.browser.isEdge()&&0===t.buttons||0!=(1&t.buttons))&&qs(n)&&o.mouseover(ya(n))}),s.on("mouseup",function(n){l(n)&&qs(n)&&o.mouseup(ya(n))}),s.on("touchend",t.touchEnd),s.on("keyup",function(n){var t,e,r=ya(n);r.raw.shiftKey&&Ns(r.raw.which)&&(t=s.selection.getRng(),e=et.fromDom(t.startContainer),n=et.fromDom(t.endContainer),u.keyup(r,e,t.startOffset,n,t.endOffset).each(function(n){c(r,n)}))}),s.on("keydown",function(n){var t=ya(n);m().each(function(n){return n.hideBars()});var e=s.selection.getRng(),r=et.fromDom(e.startContainer),o=et.fromDom(e.endContainer),n=ro(js,_s)(et.fromDom(s.selection.getStart()));u.keydown(t,r,e.startOffset,o,e.endOffset,n).each(function(n){c(t,n)}),m().each(function(n){return n.showBars()})}),s.on("NodeChange",function(){var n=s.selection,t=et.fromDom(n.getStart()),n=et.fromDom(n.getEnd());Cr(Se,[t,n]).fold(function(){return d.clear(r)},y)})}),{clear:d.clear}}var Us=function(n,e){function t(){return Sf(Wa(n)).bind(function(t){var n=Se(t);return n.map(function(n){return"caption"===ft(t)?mr(t):dr(e,n,t)})})}function r(){u.set(G(t)()),T(i.get(),function(n){return n()})}function o(t,e){function r(){return u.get().fold(function(){t.setDisabled(!0)},function(n){t.setDisabled(e(n))})}return r(),i.set(i.get().concat([r])),function(){i.set(b(i.get(),function(n){return n!==r}))}}var u=Fa(P.none()),i=Fa([]);return n.on("NodeChange ExecCommand TableSelectorChange",r),{onSetupTable:function(n){return o(n,function(n){return!1})},onSetupCellOrRow:function(n){return o(n,function(n){return"caption"===ft(n.element)})},onSetupPasteable:function(t){return function(n){return o(n,function(n){return"caption"===ft(n.element)||t().isNone()})}},onSetupMergeable:function(n){return o(n,function(n){return n.mergable.isNone()})},onSetupUnmergeable:function(n){return o(n,function(n){return n.unmergable.isNone()})},resetTargets:r,targets:function(){return u.get()}}},$s=function(t,n,e){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});function r(n){return function(){return t.execCommand(n)}}t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(e.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(e.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteable(e.getColumns)}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteable(e.getColumns)}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})},Gs=function(t){var n=t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");0<n.length&&t.ui.registry.addContextToolbar("table",{predicate:function(n){return t.dom.is(n,"table")&&t.getBody().contains(n)},items:n,scope:"node",position:"node"})},Ks=function(t,n,e){function r(n){return function(){return t.execCommand(n)}}function o(n){t.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})}var u={text:"Table properties",onSetup:n.onSetupTable,onAction:r("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:r("mceTableDelete")};t.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(e.getRows)}),t.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(e.getRows)});t.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteable(e.getColumns)}),t.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteable(e.getColumns)});t.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:n.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:n.onSetupMergeable}),t.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:n.onSetupUnmergeable});!1===t.getParam("table_grid",!0,"boolean")?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",u),t.ui.registry.addMenuItem("deletetable",i),t.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),t.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),t.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),t.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold(function(){return""},function(n){return"caption"===ft(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}})};Dr.add("table",function(t){var n=Or(function(){return _a(t)},function(){return Sf(Wa(t))},Pr.selectedSelector),e=Us(t,n),r=$a(t),o=Vs(t,r.lazyResize,e),u=Tf(t,r.lazyWire,n),i=zf();return jf(t,u,o,n,i),_f(t,u,n),kr(t,n,u,o),Ks(t,e,i),$s(t,e,i),Gs(t),t.on("PreInit",function(){t.serializer.addTempAttr(Pr.firstSelected),t.serializer.addTempAttr(Pr.lastSelected),Ff(t)}),ka(t)&&t.on("keydown",function(n){ts(n,t,u)}),t.on("remove",function(){r.destroy()}),Of(t,i,r,e)})}();